import{u as Ec,R as Sc,r as P,j as v}from"./main-B5R1K2kW.js";function ae(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ae(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var _c={value:()=>{}};function yn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wt(n)}function Wt(e){this._=e}function Nc(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Wt.prototype=yn.prototype={constructor:Wt,on:function(e,t){var n=this._,o=Nc(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Cc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Zo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Zo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Cc(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Zo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=_c,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qn="http://www.w3.org/1999/xhtml";const Go={svg:"http://www.w3.org/2000/svg",xhtml:Qn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Go.hasOwnProperty(t)?{space:Go[t],local:e}:e}function Ac(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qn&&t.documentElement.namespaceURI===Qn?t.createElement(e):t.createElementNS(n,e)}}function Tc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ui(e){var t=xn(e);return(t.local?Tc:Ac)(t)}function kc(){}function bo(e){return e==null?kc:function(){return this.querySelector(e)}}function Rc(e){typeof e!="function"&&(e=bo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,c,u=0;u<s;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new pe(o,this._parents)}function Mc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pc(){return[]}function di(e){return e==null?Pc:function(){return this.querySelectorAll(e)}}function Ic(e){return function(){return Mc(e.apply(this,arguments))}}function Oc(e){typeof e=="function"?e=Ic(e):e=di(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(o.push(e.call(l,l.__data__,c,s)),r.push(l));return new pe(o,r)}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Dc=Array.prototype.find;function $c(e){return function(){return Dc.call(this.children,e)}}function Lc(){return this.firstElementChild}function Hc(e){return this.select(e==null?Lc:$c(typeof e=="function"?e:hi(e)))}var zc=Array.prototype.filter;function Bc(){return Array.from(this.children)}function jc(e){return function(){return zc.call(this.children,e)}}function Fc(e){return this.selectAll(e==null?Bc:jc(typeof e=="function"?e:hi(e)))}function Vc(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new pe(o,this._parents)}function pi(e){return new Array(e.length)}function Uc(){return new pe(this._enter||this._groups.map(pi),this._parents)}function nn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nn.prototype={constructor:nn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qc(e){return function(){return e}}function Xc(e,t,n,o,r,i){for(var s=0,a,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new nn(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Yc(e,t,n,o,r,i,s){var a,l,c=new Map,u=t.length,f=i.length,d=new Array(u),h;for(a=0;a<u;++a)(l=t[a])&&(d[a]=h=s.call(l,l.__data__,a,t)+"",c.has(h)?r[a]=l:c.set(h,l));for(a=0;a<f;++a)h=s.call(e,i[a],a,i)+"",(l=c.get(h))?(o[a]=l,l.__data__=i[a],c.delete(h)):n[a]=new nn(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(r[a]=l)}function Wc(e){return e.__data__}function Zc(e,t){if(!arguments.length)return Array.from(this,Wc);var n=t?Yc:Xc,o=this._parents,r=this._groups;typeof e!="function"&&(e=qc(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=o[c],f=r[c],d=f.length,h=Gc(e.call(u,u&&u.__data__,c,o)),g=h.length,m=a[c]=new Array(g),y=s[c]=new Array(g),x=l[c]=new Array(d);n(u,f,m,y,x,h,t);for(var S=0,p=0,w,E;S<g;++S)if(w=m[S]){for(S>=p&&(p=S+1);!(E=y[p])&&++p<g;);w._next=E||null}}return s=new pe(s,o),s._enter=a,s._exit=l,s}function Gc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kc(){return new pe(this._exit||this._groups.map(pi),this._parents)}function Jc(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Qc(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var c=n[l],u=o[l],f=c.length,d=a[l]=new Array(f),h,g=0;g<f;++g)(h=c[g]||u[g])&&(d[g]=h);for(;l<r;++l)a[l]=n[l];return new pe(a,this._parents)}function el(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function tl(e){e||(e=nl);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new pe(r,this._parents).order()}function nl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ol(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rl(){return Array.from(this)}function il(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function sl(){let e=0;for(const t of this)++e;return e}function al(){return!this.node()}function cl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function ll(e){return function(){this.removeAttribute(e)}}function ul(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dl(e,t){return function(){this.setAttribute(e,t)}}function fl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gl(e,t){var n=xn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ul:ll:typeof t=="function"?n.local?pl:hl:n.local?fl:dl)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ml(e){return function(){this.style.removeProperty(e)}}function yl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function wl(e,t,n){return arguments.length>1?this.each((t==null?ml:typeof t=="function"?xl:yl)(e,t,n??"")):Qe(this.node(),e)}function Qe(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function bl(e){return function(){delete this[e]}}function vl(e,t){return function(){this[e]=t}}function El(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sl(e,t){return arguments.length>1?this.each((t==null?bl:typeof t=="function"?El:vl)(e,t)):this.node()[e]}function mi(e){return e.trim().split(/^|\s+/)}function vo(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=mi(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xi(e,t){for(var n=vo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function wi(e,t){for(var n=vo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function _l(e){return function(){xi(this,e)}}function Nl(e){return function(){wi(this,e)}}function Cl(e,t){return function(){(t.apply(this,arguments)?xi:wi)(this,e)}}function Al(e,t){var n=mi(e+"");if(arguments.length<2){for(var o=vo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cl:t?_l:Nl)(n,t))}function Tl(){this.textContent=""}function kl(e){return function(){this.textContent=e}}function Rl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ml(e){return arguments.length?this.each(e==null?Tl:(typeof e=="function"?Rl:kl)(e)):this.node().textContent}function Pl(){this.innerHTML=""}function Il(e){return function(){this.innerHTML=e}}function Ol(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Dl(e){return arguments.length?this.each(e==null?Pl:(typeof e=="function"?Ol:Il)(e)):this.node().innerHTML}function $l(){this.nextSibling&&this.parentNode.appendChild(this)}function Ll(){return this.each($l)}function Hl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zl(){return this.each(Hl)}function Bl(e){var t=typeof e=="function"?e:ui(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jl(){return null}function Fl(e,t){var n=typeof e=="function"?e:ui(e),o=t==null?jl:typeof t=="function"?t:bo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Vl(){var e=this.parentNode;e&&e.removeChild(this)}function Ul(){return this.each(Vl)}function ql(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yl(e){return this.select(e?Xl:ql)}function Wl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zl(e){return function(t){e.call(this,t,this.__data__)}}function Gl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Kl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Jl(e,t,n){return function(){var o=this.__on,r,i=Zl(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Ql(e,t,n){var o=Gl(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<i;++r)if((s=o[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Jl:Kl,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function bi(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function eu(e,t){return function(){return bi(this,e,t)}}function tu(e,t){return function(){return bi(this,e,t.apply(this,arguments))}}function nu(e,t){return this.each((typeof t=="function"?tu:eu)(e,t))}function*ou(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var vi=[null];function pe(e,t){this._groups=e,this._parents=t}function Tt(){return new pe([[document.documentElement]],vi)}function ru(){return this}pe.prototype=Tt.prototype={constructor:pe,select:Rc,selectAll:Oc,selectChild:Hc,selectChildren:Fc,filter:Vc,data:Zc,enter:Uc,exit:Kc,join:Jc,merge:Qc,selection:ru,order:el,sort:tl,call:ol,nodes:rl,node:il,size:sl,empty:al,each:cl,attr:gl,style:wl,property:Sl,classed:Al,text:Ml,html:Dl,raise:Ll,lower:zl,append:Bl,insert:Fl,remove:Ul,clone:Yl,datum:Wl,on:Ql,dispatch:nu,[Symbol.iterator]:ou};function he(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],vi)}function iu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ge(e,t){if(e=iu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const su={passive:!1},xt={capture:!0,passive:!1};function Bn(e){e.stopImmediatePropagation()}function Ke(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=he(e).on("dragstart.drag",Ke,xt);"onselectstart"in t?n.on("selectstart.drag",Ke,xt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Si(e,t){var n=e.document.documentElement,o=he(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ke,xt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zt=e=>()=>e;function eo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}eo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function au(e){return!e.ctrlKey&&!e.button}function cu(){return this.parentNode}function lu(e,t){return t??{x:e.x,y:e.y}}function uu(){return navigator.maxTouchPoints||"ontouchstart"in this}function _i(){var e=au,t=cu,n=lu,o=uu,r={},i=yn("start","drag","end"),s=0,a,l,c,u,f=0;function d(w){w.on("mousedown.drag",h).filter(o).on("touchstart.drag",y).on("touchmove.drag",x,su).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,E){if(!(u||!e.call(this,w,E))){var A=p(this,t.call(this,w,E),w,E,"mouse");A&&(he(w.view).on("mousemove.drag",g,xt).on("mouseup.drag",m,xt),Ei(w.view),Bn(w),c=!1,a=w.clientX,l=w.clientY,A("start",w))}}function g(w){if(Ke(w),!c){var E=w.clientX-a,A=w.clientY-l;c=E*E+A*A>f}r.mouse("drag",w)}function m(w){he(w.view).on("mousemove.drag mouseup.drag",null),Si(w.view,c),Ke(w),r.mouse("end",w)}function y(w,E){if(e.call(this,w,E)){var A=w.changedTouches,T=t.call(this,w,E),k=A.length,I,B;for(I=0;I<k;++I)(B=p(this,T,w,E,A[I].identifier,A[I]))&&(Bn(w),B("start",w,A[I]))}}function x(w){var E=w.changedTouches,A=E.length,T,k;for(T=0;T<A;++T)(k=r[E[T].identifier])&&(Ke(w),k("drag",w,E[T]))}function S(w){var E=w.changedTouches,A=E.length,T,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<A;++T)(k=r[E[T].identifier])&&(Bn(w),k("end",w,E[T]))}function p(w,E,A,T,k,I){var B=i.copy(),D=ge(I||A,E),$,z,b;if((b=n.call(w,new eo("beforestart",{sourceEvent:A,target:d,identifier:k,active:s,x:D[0],y:D[1],dx:0,dy:0,dispatch:B}),T))!=null)return $=b.x-D[0]||0,z=b.y-D[1]||0,function N(_,C,O){var M=D,L;switch(_){case"start":r[k]=N,L=s++;break;case"end":delete r[k],--s;case"drag":D=ge(O||C,E),L=s;break}B.call(_,w,new eo(_,{sourceEvent:C,subject:b,target:d,identifier:k,active:L,x:D[0]+$,y:D[1]+z,dx:D[0]-M[0],dy:D[1]-M[1],dispatch:B}),T)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:zt(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:zt(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:zt(w),d):n},d.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:zt(!!w),d):o},d.on=function(){var w=i.on.apply(i,arguments);return w===i?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}function Eo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ni(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function kt(){}var wt=.7,on=1/wt,Je="\\s*([+-]?\\d+)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",du=/^#([0-9a-f]{3,8})$/,fu=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),hu=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),pu=new RegExp(`^rgba\\(${Je},${Je},${Je},${bt}\\)$`),gu=new RegExp(`^rgba\\(${Se},${Se},${Se},${bt}\\)$`),mu=new RegExp(`^hsl\\(${bt},${Se},${Se}\\)$`),yu=new RegExp(`^hsla\\(${bt},${Se},${Se},${bt}\\)$`),Ko={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eo(kt,Fe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jo,formatHex:Jo,formatHex8:xu,formatHsl:wu,formatRgb:Qo,toString:Qo});function Jo(){return this.rgb().formatHex()}function xu(){return this.rgb().formatHex8()}function wu(){return Ci(this).formatHsl()}function Qo(){return this.rgb().formatRgb()}function Fe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=du.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?er(t):n===3?new ue(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fu.exec(e))?new ue(t[1],t[2],t[3],1):(t=hu.exec(e))?new ue(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pu.exec(e))?Bt(t[1],t[2],t[3],t[4]):(t=gu.exec(e))?Bt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mu.exec(e))?or(t[1],t[2]/100,t[3]/100,1):(t=yu.exec(e))?or(t[1],t[2]/100,t[3]/100,t[4]):Ko.hasOwnProperty(e)?er(Ko[e]):e==="transparent"?new ue(NaN,NaN,NaN,0):null}function er(e){return new ue(e>>16&255,e>>8&255,e&255,1)}function Bt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ue(e,t,n,o)}function bu(e){return e instanceof kt||(e=Fe(e)),e?(e=e.rgb(),new ue(e.r,e.g,e.b,e.opacity)):new ue}function to(e,t,n,o){return arguments.length===1?bu(e):new ue(e,t,n,o??1)}function ue(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Eo(ue,to,Ni(kt,{brighter(e){return e=e==null?on:Math.pow(on,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wt:Math.pow(wt,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ue(ze(this.r),ze(this.g),ze(this.b),rn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tr,formatHex:tr,formatHex8:vu,formatRgb:nr,toString:nr}));function tr(){return`#${Le(this.r)}${Le(this.g)}${Le(this.b)}`}function vu(){return`#${Le(this.r)}${Le(this.g)}${Le(this.b)}${Le((isNaN(this.opacity)?1:this.opacity)*255)}`}function nr(){const e=rn(this.opacity);return`${e===1?"rgb(":"rgba("}${ze(this.r)}, ${ze(this.g)}, ${ze(this.b)}${e===1?")":`, ${e})`}`}function rn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ze(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Le(e){return e=ze(e),(e<16?"0":"")+e.toString(16)}function or(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new me(e,t,n,o)}function Ci(e){if(e instanceof me)return new me(e.h,e.s,e.l,e.opacity);if(e instanceof kt||(e=Fe(e)),!e)return new me;if(e instanceof me)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new me(s,a,l,e.opacity)}function Eu(e,t,n,o){return arguments.length===1?Ci(e):new me(e,t,n,o??1)}function me(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Eo(me,Eu,Ni(kt,{brighter(e){return e=e==null?on:Math.pow(on,e),new me(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wt:Math.pow(wt,e),new me(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ue(jn(e>=240?e-240:e+120,r,o),jn(e,r,o),jn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new me(rr(this.h),jt(this.s),jt(this.l),rn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rn(this.opacity);return`${e===1?"hsl(":"hsla("}${rr(this.h)}, ${jt(this.s)*100}%, ${jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rr(e){return e=(e||0)%360,e<0?e+360:e}function jt(e){return Math.max(0,Math.min(1,e||0))}function jn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const So=e=>()=>e;function Su(e,t){return function(n){return e+n*t}}function _u(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Nu(e){return(e=+e)==1?Ai:function(t,n){return n-t?_u(t,n,e):So(isNaN(t)?n:t)}}function Ai(e,t){var n=t-e;return n?Su(e,n):So(isNaN(e)?t:e)}const sn=function e(t){var n=Nu(t);function o(r,i){var s=n((r=to(r)).r,(i=to(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=Ai(r.opacity,i.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return o.gamma=e,o}(1);function Cu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function Au(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tu(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=mt(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function ku(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function ve(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ru(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=mt(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var no=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(no.source,"g");function Mu(e){return function(){return e}}function Pu(e){return function(t){return e(t)+""}}function Ti(e,t){var n=no.lastIndex=Fn.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=no.exec(e))&&(r=Fn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:ve(o,r)})),n=Fn.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?Pu(l[0].x):Mu(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function mt(e,t){var n=typeof t,o;return t==null||n==="boolean"?So(t):(n==="number"?ve:n==="string"?(o=Fe(t))?(t=o,sn):Ti:t instanceof Fe?sn:t instanceof Date?ku:Au(t)?Cu:Array.isArray(t)?Tu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ru:ve)(e,t)}var ir=180/Math.PI,oo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ki(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*ir,skewX:Math.atan(l)*ir,scaleX:s,scaleY:a}}var Ft;function Iu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?oo:ki(t.a,t.b,t.c,t.d,t.e,t.f)}function Ou(e){return e==null||(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","g")),Ft.setAttribute("transform",e),!(e=Ft.transform.baseVal.consolidate()))?oo:(e=e.matrix,ki(e.a,e.b,e.c,e.d,e.e,e.f))}function Ri(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,u,f,d,h,g){if(c!==f||u!==d){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:ve(c,f)},{i:m-2,x:ve(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(r(f)+"rotate(",null,o)-2,x:ve(c,u)})):u&&f.push(r(f)+"rotate("+u+o)}function a(c,u,f,d){c!==u?d.push({i:f.push(r(f)+"skewX(",null,o)-2,x:ve(c,u)}):u&&f.push(r(f)+"skewX("+u+o)}function l(c,u,f,d,h,g){if(c!==f||u!==d){var m=h.push(r(h)+"scale(",null,",",null,")");g.push({i:m-4,x:ve(c,f)},{i:m-2,x:ve(u,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,f,d),s(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var g=-1,m=d.length,y;++g<m;)f[(y=d[g]).i]=y.x(h);return f.join("")}}}var Du=Ri(Iu,"px, ","px)","deg)"),$u=Ri(Ou,", ",")",")"),Lu=1e-12;function sr(e){return((e=Math.exp(e))+1/e)/2}function Hu(e){return((e=Math.exp(e))-1/e)/2}function zu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zt=function e(t,n,o){function r(i,s){var a=i[0],l=i[1],c=i[2],u=s[0],f=s[1],d=s[2],h=u-a,g=f-l,m=h*h+g*g,y,x;if(m<Lu)x=Math.log(d/c)/t,y=function(T){return[a+T*h,l+T*g,c*Math.exp(t*T*x)]};else{var S=Math.sqrt(m),p=(d*d-c*c+o*m)/(2*c*n*S),w=(d*d-c*c-o*m)/(2*d*n*S),E=Math.log(Math.sqrt(p*p+1)-p),A=Math.log(Math.sqrt(w*w+1)-w);x=(A-E)/t,y=function(T){var k=T*x,I=sr(E),B=c/(n*S)*(I*zu(t*k+E)-Hu(E));return[a+B*h,l+B*g,c*I/sr(t*k+E)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r}(Math.SQRT2,2,4);var et=0,pt=0,dt=0,Mi=1e3,an,gt,cn=0,Ve=0,wn=0,vt=typeof performance=="object"&&performance.now?performance:Date,Pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _o(){return Ve||(Pi(Bu),Ve=vt.now()+wn)}function Bu(){Ve=0}function ln(){this._call=this._time=this._next=null}ln.prototype=Ii.prototype={constructor:ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_o():+n)+(t==null?0:+t),!this._next&&gt!==this&&(gt?gt._next=this:an=this,gt=this),this._call=e,this._time=n,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};function Ii(e,t,n){var o=new ln;return o.restart(e,t,n),o}function ju(){_o(),++et;for(var e=an,t;e;)(t=Ve-e._time)>=0&&e._call.call(void 0,t),e=e._next;--et}function ar(){Ve=(cn=vt.now())+wn,et=pt=0;try{ju()}finally{et=0,Vu(),Ve=0}}function Fu(){var e=vt.now(),t=e-cn;t>Mi&&(wn-=t,cn=e)}function Vu(){for(var e,t=an,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:an=n);gt=e,ro(o)}function ro(e){if(!et){pt&&(pt=clearTimeout(pt));var t=e-Ve;t>24?(e<1/0&&(pt=setTimeout(ar,e-vt.now()-wn)),dt&&(dt=clearInterval(dt))):(dt||(cn=vt.now(),dt=setInterval(Fu,Mi)),et=1,Pi(ar))}}function cr(e,t,n){var o=new ln;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Uu=yn("start","end","cancel","interrupt"),qu=[],Oi=0,lr=1,io=2,Gt=3,ur=4,so=5,Kt=6;function bn(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Xu(e,n,{name:t,index:o,group:r,on:Uu,tween:qu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Oi})}function No(e,t){var n=xe(e,t);if(n.state>Oi)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=xe(e,t);if(n.state>Gt)throw new Error("too late; already running");return n}function xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ii(i,0,n.time);function i(c){n.state=lr,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,f,d,h;if(n.state!==lr)return l();for(u in o)if(h=o[u],h.name===n.name){if(h.state===Gt)return cr(s);h.state===ur?(h.state=Kt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[u]):+u<t&&(h.state=Kt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[u])}if(cr(function(){n.state===Gt&&(n.state=ur,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=io,n.on.call("start",e,e.__data__,n.index,n.group),n.state===io){for(n.state=Gt,r=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=so,1),f=-1,d=r.length;++f<d;)r[f].call(e,u);n.state===so&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Kt,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Jt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>io&&o.state<so,o.state=Kt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function Yu(e){return this.each(function(){Jt(this,e)})}function Wu(e,t){var n,o;return function(){var r=Ne(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Zu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ne(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function Gu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=xe(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?Wu:Zu)(n,e,t))}function Co(e,t,n){var o=e._id;return e.each(function(){var r=Ne(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return xe(r,o).value[t]}}function Di(e,t){var n;return(typeof t=="number"?ve:t instanceof Fe?sn:(n=Fe(t))?(t=n,sn):Ti)(e,t)}function Ku(e){return function(){this.removeAttribute(e)}}function Ju(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qu(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function ed(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function td(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function nd(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function od(e,t){var n=xn(e),o=n==="transform"?$u:Di;return this.attrTween(e,typeof t=="function"?(n.local?nd:td)(n,o,Co(this,"attr."+e,t)):t==null?(n.local?Ju:Ku)(n):(n.local?ed:Qu)(n,o,t))}function rd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function id(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sd(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&id(e,i)),n}return r._value=t,r}function ad(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&rd(e,i)),n}return r._value=t,r}function cd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=xn(e);return this.tween(n,(o.local?sd:ad)(o,t))}function ld(e,t){return function(){No(this,e).delay=+t.apply(this,arguments)}}function ud(e,t){return t=+t,function(){No(this,e).delay=t}}function dd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ld:ud)(t,e)):xe(this.node(),t).delay}function fd(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function hd(e,t){return t=+t,function(){Ne(this,e).duration=t}}function pd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fd:hd)(t,e)):xe(this.node(),t).duration}function gd(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function md(e){var t=this._id;return arguments.length?this.each(gd(t,e)):xe(this.node(),t).ease}function yd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function xd(e){if(typeof e!="function")throw new Error;return this.each(yd(this._id,e))}function wd(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Re(o,this._parents,this._name,this._id)}function bd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,f=s[a]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;a<o;++a)s[a]=t[a];return new Re(s,this._parents,this._name,this._id)}function vd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ed(e,t,n){var o,r,i=vd(t)?No:Ne;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function Sd(e,t){var n=this._id;return arguments.length<2?xe(this.node(),n).on.on(e):this.each(Ed(n,e,t))}function _d(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nd(){return this.on("end.remove",_d(this._id))}function Cd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bo(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,c=i[s]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,bn(c[d],t,n,d,c,xe(u,n)));return new Re(i,this._parents,t,n)}function Ad(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,g=xe(u,n),m=0,y=d.length;m<y;++m)(h=d[m])&&bn(h,t,n,m,d,g);i.push(d),s.push(u)}return new Re(i,s,t,n)}var Td=Tt.prototype.constructor;function kd(){return new Td(this._groups,this._parents)}function Rd(e,t){var n,o,r;return function(){var i=Qe(this,e),s=(this.style.removeProperty(e),Qe(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function $i(e){return function(){this.style.removeProperty(e)}}function Md(e,t,n){var o,r=n+"",i;return function(){var s=Qe(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Pd(e,t,n){var o,r,i;return function(){var s=Qe(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Qe(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function Id(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Ne(this,e),c=l.on,u=l.value[i]==null?a||(a=$i(t)):void 0;(c!==n||r!==u)&&(o=(n=c).copy()).on(s,r=u),l.on=o}}function Od(e,t,n){var o=(e+="")=="transform"?Du:Di;return t==null?this.styleTween(e,Rd(e,o)).on("end.style."+e,$i(e)):typeof t=="function"?this.styleTween(e,Pd(e,o,Co(this,"style."+e,t))).each(Id(this._id,e)):this.styleTween(e,Md(e,o,t),n).on("end.style."+e,null)}function Dd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function $d(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Dd(e,s,n)),o}return i._value=t,i}function Ld(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,$d(e,t,n??""))}function Hd(e){return function(){this.textContent=e}}function zd(e){return function(){var t=e(this);this.textContent=t??""}}function Bd(e){return this.tween("text",typeof e=="function"?zd(Co(this,"text",e)):Hd(e==null?"":e+""))}function jd(e){return function(t){this.textContent=e.call(this,t)}}function Fd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&jd(r)),t}return o._value=e,o}function Vd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fd(e))}function Ud(){for(var e=this._name,t=this._id,n=Li(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=xe(l,t);bn(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Re(o,this._parents,e,n)}function qd(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var c=Ne(this,o),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&i()})}var Xd=0;function Re(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Li(){return++Xd}var Ae=Tt.prototype;Re.prototype={constructor:Re,select:Cd,selectAll:Ad,selectChild:Ae.selectChild,selectChildren:Ae.selectChildren,filter:wd,merge:bd,selection:kd,transition:Ud,call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:Sd,attr:od,attrTween:cd,style:Od,styleTween:Ld,text:Bd,textTween:Vd,remove:Nd,tween:Gu,delay:dd,duration:pd,ease:md,easeVarying:xd,end:qd,[Symbol.iterator]:Ae[Symbol.iterator]};function Yd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wd={time:null,delay:0,duration:250,ease:Yd};function Zd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gd(e){var t,n;e instanceof Re?(t=e._id,e=e._name):(t=Li(),(n=Wd).time=_o(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&bn(l,e,t,c,s,n||Zd(l,t));return new Re(o,this._parents,e,t)}Tt.prototype.interrupt=Yu;Tt.prototype.transition=Gd;const Vt=e=>()=>e;function Kd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vn=new Te(1,0,0);Hi.prototype=Te.prototype;function Hi(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vn;return e.__zoom}function Vn(e){e.stopImmediatePropagation()}function ft(e){e.preventDefault(),e.stopImmediatePropagation()}function Jd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function dr(){return this.__zoom||vn}function ef(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tf(){return navigator.maxTouchPoints||"ontouchstart"in this}function nf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function zi(){var e=Jd,t=Qd,n=nf,o=ef,r=tf,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Zt,c=yn("start","zoom","end"),u,f,d,h=500,g=150,m=0,y=10;function x(b){b.property("__zoom",dr).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",B).filter(r).on("touchstart.zoom",D).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(b,N,_,C){var O=b.selection?b.selection():b;O.property("__zoom",dr),b!==O?E(b,N,_,C):O.interrupt().each(function(){A(this,arguments).event(C).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},x.scaleBy=function(b,N,_,C){x.scaleTo(b,function(){var O=this.__zoom.k,M=typeof N=="function"?N.apply(this,arguments):N;return O*M},_,C)},x.scaleTo=function(b,N,_,C){x.transform(b,function(){var O=t.apply(this,arguments),M=this.__zoom,L=_==null?w(O):typeof _=="function"?_.apply(this,arguments):_,H=M.invert(L),j=typeof N=="function"?N.apply(this,arguments):N;return n(p(S(M,j),L,H),O,s)},_,C)},x.translateBy=function(b,N,_,C){x.transform(b,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),s)},null,C)},x.translateTo=function(b,N,_,C,O){x.transform(b,function(){var M=t.apply(this,arguments),L=this.__zoom,H=C==null?w(M):typeof C=="function"?C.apply(this,arguments):C;return n(vn.translate(H[0],H[1]).scale(L.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof _=="function"?-_.apply(this,arguments):-_),M,s)},C,O)};function S(b,N){return N=Math.max(i[0],Math.min(i[1],N)),N===b.k?b:new Te(N,b.x,b.y)}function p(b,N,_){var C=N[0]-_[0]*b.k,O=N[1]-_[1]*b.k;return C===b.x&&O===b.y?b:new Te(b.k,C,O)}function w(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function E(b,N,_,C){b.on("start.zoom",function(){A(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(C).end()}).tween("zoom",function(){var O=this,M=arguments,L=A(O,M).event(C),H=t.apply(O,M),j=_==null?w(H):typeof _=="function"?_.apply(O,M):_,q=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),F=O.__zoom,G=typeof N=="function"?N.apply(O,M):N,Y=l(F.invert(j).concat(q/F.k),G.invert(j).concat(q/G.k));return function(X){if(X===1)X=G;else{var V=Y(X),W=q/V[2];X=new Te(W,j[0]-V[0]*W,j[1]-V[1]*W)}L.zoom(null,X)}})}function A(b,N,_){return!_&&b.__zooming||new T(b,N)}function T(b,N){this.that=b,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,N),this.taps=0}T.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,N){return this.mouse&&b!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var N=he(this.that).datum();c.call(b,this.that,new Kd(b,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:c}),N)}};function k(b,...N){if(!e.apply(this,arguments))return;var _=A(this,N).event(b),C=this.__zoom,O=Math.max(i[0],Math.min(i[1],C.k*Math.pow(2,o.apply(this,arguments)))),M=ge(b);if(_.wheel)(_.mouse[0][0]!==M[0]||_.mouse[0][1]!==M[1])&&(_.mouse[1]=C.invert(_.mouse[0]=M)),clearTimeout(_.wheel);else{if(C.k===O)return;_.mouse=[M,C.invert(M)],Jt(this),_.start()}ft(b),_.wheel=setTimeout(L,g),_.zoom("mouse",n(p(S(C,O),_.mouse[0],_.mouse[1]),_.extent,s));function L(){_.wheel=null,_.end()}}function I(b,...N){if(d||!e.apply(this,arguments))return;var _=b.currentTarget,C=A(this,N,!0).event(b),O=he(b.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",q,!0),M=ge(b,_),L=b.clientX,H=b.clientY;Ei(b.view),Vn(b),C.mouse=[M,this.__zoom.invert(M)],Jt(this),C.start();function j(F){if(ft(F),!C.moved){var G=F.clientX-L,Y=F.clientY-H;C.moved=G*G+Y*Y>m}C.event(F).zoom("mouse",n(p(C.that.__zoom,C.mouse[0]=ge(F,_),C.mouse[1]),C.extent,s))}function q(F){O.on("mousemove.zoom mouseup.zoom",null),Si(F.view,C.moved),ft(F),C.event(F).end()}}function B(b,...N){if(e.apply(this,arguments)){var _=this.__zoom,C=ge(b.changedTouches?b.changedTouches[0]:b,this),O=_.invert(C),M=_.k*(b.shiftKey?.5:2),L=n(p(S(_,M),C,O),t.apply(this,N),s);ft(b),a>0?he(this).transition().duration(a).call(E,L,C,b):he(this).call(x.transform,L,C,b)}}function D(b,...N){if(e.apply(this,arguments)){var _=b.touches,C=_.length,O=A(this,N,b.changedTouches.length===C).event(b),M,L,H,j;for(Vn(b),L=0;L<C;++L)H=_[L],j=ge(H,this),j=[j,this.__zoom.invert(j),H.identifier],O.touch0?!O.touch1&&O.touch0[2]!==j[2]&&(O.touch1=j,O.taps=0):(O.touch0=j,M=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),M&&(O.taps<2&&(f=j[0],u=setTimeout(function(){u=null},h)),Jt(this),O.start())}}function $(b,...N){if(this.__zooming){var _=A(this,N).event(b),C=b.changedTouches,O=C.length,M,L,H,j;for(ft(b),M=0;M<O;++M)L=C[M],H=ge(L,this),_.touch0&&_.touch0[2]===L.identifier?_.touch0[0]=H:_.touch1&&_.touch1[2]===L.identifier&&(_.touch1[0]=H);if(L=_.that.__zoom,_.touch1){var q=_.touch0[0],F=_.touch0[1],G=_.touch1[0],Y=_.touch1[1],X=(X=G[0]-q[0])*X+(X=G[1]-q[1])*X,V=(V=Y[0]-F[0])*V+(V=Y[1]-F[1])*V;L=S(L,Math.sqrt(X/V)),H=[(q[0]+G[0])/2,(q[1]+G[1])/2],j=[(F[0]+Y[0])/2,(F[1]+Y[1])/2]}else if(_.touch0)H=_.touch0[0],j=_.touch0[1];else return;_.zoom("touch",n(p(L,H,j),_.extent,s))}}function z(b,...N){if(this.__zooming){var _=A(this,N).event(b),C=b.changedTouches,O=C.length,M,L;for(Vn(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),M=0;M<O;++M)L=C[M],_.touch0&&_.touch0[2]===L.identifier?delete _.touch0:_.touch1&&_.touch1[2]===L.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(L=ge(L,this),Math.hypot(f[0]-L[0],f[1]-L[1])<y)){var H=he(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return x.wheelDelta=function(b){return arguments.length?(o=typeof b=="function"?b:Vt(+b),x):o},x.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Vt(!!b),x):e},x.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:Vt(!!b),x):r},x.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Vt([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),x):t},x.scaleExtent=function(b){return arguments.length?(i[0]=+b[0],i[1]=+b[1],x):[i[0],i[1]]},x.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(b){return arguments.length?(n=b,x):n},x.duration=function(b){return arguments.length?(a=+b,x):a},x.interpolate=function(b){return arguments.length?(l=b,x):l},x.on=function(){var b=c.on.apply(c,arguments);return b===c?x:b},x.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,x):Math.sqrt(m)},x.tapDistance=function(b){return arguments.length?(y=+b,x):y},x}const _e={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Et=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Bi=["Enter"," ","Escape"],ji={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var tt;(function(e){e.Strict="strict",e.Loose="loose"})(tt||(tt={}));var Be;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Be||(Be={}));var St;(function(e){e.Partial="partial",e.Full="full"})(St||(St={}));const Fi={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Oe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Oe||(Oe={}));var un;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(un||(un={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));const fr={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top};function Vi(e){return e===null?null:e?"valid":"invalid"}const Ui=e=>"id"in e&&"source"in e&&"target"in e,of=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ao=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Rt=(e,t=[0,0])=>{const{width:n,height:o}=Me(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},rf=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const i=typeof r=="string";let s=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(r):Ao(r)?r:t.nodeLookup.get(r.id));const a=s?dn(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return En(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Sn(n)},Mt=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=dn(o);n=En(n,r)}}),Sn(n)},To=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const a={...Pt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:u,selectable:f=!0,hidden:d=!1}=c;if(s&&!f||d)continue;const h=u.width??c.width??c.initialWidth??null,g=u.height??c.height??c.initialHeight??null,m=_t(a,ot(c)),y=(h??0)*(g??0),x=i&&m>0;(!c.internals.handleBounds||x||m>=y||c.dragging)&&l.push(c)}return l},sf=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function af(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function cf({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);const a=af(e,s),l=Mt(a),c=ko(l,t,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(c,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function qi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??o;let f=s.extent||r;if(s.extent==="parent"&&!s.expandParent)if(!a)i?.("005",_e.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(f=[[l,c],[l+h,c+g]])}else a&&rt(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const d=rt(f)?Ue(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&i?.("015",_e.error015()),{position:{x:d.x-l+(s.measured.width??0)*u[0],y:d.y-c+(s.measured.height??0)*u[1]},positionAbsolute:d}}async function lf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=i.has(d.id),g=!h&&d.parentId&&s.find(m=>m.id===d.parentId);(h||g)&&s.push(d)}const a=new Set(t.map(d=>d.id)),l=o.filter(d=>d.deletable!==!1),u=sf(s,l);for(const d of l)a.has(d.id)&&!u.find(g=>g.id===d.id)&&u.push(d);if(!r)return{edges:u,nodes:s};const f=await r({nodes:s,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:s}:{edges:[],nodes:[]}:f}const nt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ue=(e={x:0,y:0},t,n)=>({x:nt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:nt(e.y,t[0][1],t[1][1]-(n?.height??0))});function Xi(e,t,n){const{width:o,height:r}=Me(n),{x:i,y:s}=n.internals.positionAbsolute;return Ue(e,[[i,s],[i+o,s+r]],t)}const hr=(e,t,n)=>e<t?nt(Math.abs(e-t),1,t)/t:e>n?-nt(Math.abs(e-n),1,t)/t:0,Yi=(e,t,n=15,o=40)=>{const r=hr(e.x,o,t.width-o)*n,i=hr(e.y,o,t.height-o)*n;return[r,i]},En=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ao=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Sn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ot=(e,t=[0,0])=>{const{x:n,y:o}=Ao(e)?e.internals.positionAbsolute:Rt(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},dn=(e,t=[0,0])=>{const{x:n,y:o}=Ao(e)?e.internals.positionAbsolute:Rt(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},Wi=(e,t)=>Sn(En(ao(e),ao(t))),_t=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},pr=e=>ye(e.width)&&ye(e.height)&&ye(e.x)&&ye(e.y),ye=e=>!isNaN(e)&&isFinite(e),uf=(e,t)=>{},_n=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Pt=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return i?_n(a,s):a},fn=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function We(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function df(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=We(e,n),r=We(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=We(e.top??e.y??0,n),r=We(e.bottom??e.y??0,n),i=We(e.left??e.x??0,t),s=We(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function ff(e,t,n,o,r,i){const{x:s,y:a}=fn(e,[t,n,o]),{x:l,y:c}=fn({x:e.x+e.width,y:e.y+e.height},[t,n,o]),u=r-l,f=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(f)}}const ko=(e,t,n,o,r,i)=>{const s=df(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),u=nt(c,o,r),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*u,g=n/2-d*u,m=ff(e,h,g,u,t,n),y={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:h-y.left+y.right,y:g-y.top+y.bottom,zoom:u}},hn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function rt(e){return e!==void 0&&e!=="parent"}function Me(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Zi(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Gi(e,t={width:0,height:0},n,o,r){const i={...e},s=o.get(n);if(s){const a=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function gr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hf(){let e,t;return{promise:new Promise((o,r)=>{e=o,t=r}),resolve:e,reject:t}}function pf(e){return{...ji,...e||{}}}function yt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=Ee(e),a=Pt({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:l,y:c}=n?_n(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Ro=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ki=e=>e?.getRootNode?.()||window?.document,gf=["INPUT","SELECT","TEXTAREA"];function Ji(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:gf.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Qi=e=>"clientX"in e,Ee=(e,t)=>{const n=Qi(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},mr=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Ro(s)}})};function es({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,c=t*.125+i*.375+a*.375+o*.125,u=Math.abs(l-e),f=Math.abs(c-t);return[l,c,u,f]}function Ut(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function yr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case U.Left:return[t-Ut(t-o,i),n];case U.Right:return[t+Ut(o-t,i),n];case U.Top:return[t,n-Ut(n-r,i)];case U.Bottom:return[t,n+Ut(r-n,i)]}}function ts({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,curvature:s=.25}){const[a,l]=yr({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[c,u]=yr({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[f,d,h,g]=es({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${o},${r}`,f,d,h,g]}function ns({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function mf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(o!==void 0)return o;const i=r&&n?1e3:0,s=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return i+s}function yf({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=En(dn(e),dn(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return _t(s,Sn(i))>0}const xf=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,wf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),bf=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ui(e)?n={...e}:n={...e,id:xf(e)},wf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function os({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=ns({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const xr={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},vf=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},wr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ef({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:r,offset:i,stepPosition:s}){const a=xr[t],l=xr[o],c={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},f=vf({source:c,sourcePosition:t,target:u}),d=f.x!==0?"x":"y",h=f[d];let g=[],m,y;const x={x:0,y:0},S={x:0,y:0},[,,p,w]=ns({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){d==="x"?(m=r.x??c.x+(u.x-c.x)*s,y=r.y??(c.y+u.y)/2):(m=r.x??(c.x+u.x)/2,y=r.y??c.y+(u.y-c.y)*s);const A=[{x:m,y:c.y},{x:m,y:u.y}],T=[{x:c.x,y},{x:u.x,y}];a[d]===h?g=d==="x"?A:T:g=d==="x"?T:A}else{const A=[{x:c.x,y:u.y}],T=[{x:u.x,y:c.y}];if(d==="x"?g=a.x===h?T:A:g=a.y===h?A:T,t===o){const $=Math.abs(e[d]-n[d]);if($<=i){const z=Math.min(i-1,i-$);a[d]===h?x[d]=(c[d]>e[d]?-1:1)*z:S[d]=(u[d]>n[d]?-1:1)*z}}if(t!==o){const $=d==="x"?"y":"x",z=a[d]===l[$],b=c[$]>u[$],N=c[$]<u[$];(a[d]===1&&(!z&&b||z&&N)||a[d]!==1&&(!z&&N||z&&b))&&(g=d==="x"?A:T)}const k={x:c.x+x.x,y:c.y+x.y},I={x:u.x+S.x,y:u.y+S.y},B=Math.max(Math.abs(k.x-g[0].x),Math.abs(I.x-g[0].x)),D=Math.max(Math.abs(k.y-g[0].y),Math.abs(I.y-g[0].y));B>=D?(m=(k.x+I.x)/2,y=g[0].y):(m=g[0].x,y=(k.y+I.y)/2)}return[[e,{x:c.x+x.x,y:c.y+x.y},...g,{x:u.x+S.x,y:u.y+S.y},n],m,y,p,w]}function Sf(e,t,n,o){const r=Math.min(wr(e,t)/2,wr(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+r*c},${s}Q ${i},${s} ${i},${s+r*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function co({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20,stepPosition:u=.5}){const[f,d,h,g,m]=Ef({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:l},offset:c,stepPosition:u});return[f.reduce((x,S,p)=>{let w="";return p>0&&p<f.length-1?w=Sf(f[p-1],S,f[p+1],s):w=`${p===0?"M":"L"}${S.x} ${S.y}`,x+=w,x},""),d,h,g,m]}function br(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _f(e){const{sourceNode:t,targetNode:n}=e;if(!br(t)||!br(n))return null;const o=t.internals.handleBounds||vr(t.handles),r=n.internals.handleBounds||vr(n.handles),i=Er(o?.source??[],e.sourceHandle),s=Er(e.connectionMode===tt.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",_e.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||U.Bottom,l=s?.position||U.Top,c=Nt(t,i,a),u=Nt(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function vr(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Nt(e,t,n=U.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Me(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case U.Top:return{x:r+s/2,y:i};case U.Right:return{x:r+s,y:i+a/2};case U.Bottom:return{x:r+s/2,y:i+a};case U.Left:return{x:r,y:i+a/2}}}function Er(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function lo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Nf(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||o,a.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=lo(l,t);i.has(c)||(s.push({id:c,color:l.color||n,...l}),i.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Mo={nodeOrigin:[0,0],nodeExtent:Et,elevateNodesOnSelect:!0,defaults:{}},Cf={...Mo,checkEquality:!0};function Po(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Af(e,t,n){const o=Po(Mo,n);for(const r of e.values())if(r.parentId)Io(r,e,t,o);else{const i=Rt(r,o.nodeOrigin),s=rt(r.extent)?r.extent:o.nodeExtent,a=Ue(i,s,Me(r));r.internals.positionAbsolute=a}}function uo(e,t,n,o){const r=Po(Cf,o);let i=e.length>0;const s=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let c=s.get(l.id);if(r.checkEquality&&l===c?.internals.userNode)t.set(l.id,c);else{const u=Rt(l,r.nodeOrigin),f=rt(l.extent)?l.extent:r.nodeExtent,d=Ue(u,f,Me(l));c={...r.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:d,handleBounds:l.measured?c?.internals.handleBounds:void 0,z:rs(l,a),userNode:l}},t.set(l.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(i=!1),l.parentId&&Io(c,t,n,o)}return i}function Tf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Io(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=Po(Mo,o),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Tf(e,n);const c=r?1e3:0,{x:u,y:f,z:d}=kf(e,l,i,s,c),{positionAbsolute:h}=e.internals,g=u!==h.x||f!==h.y;(g||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:u,y:f}:h,z:d}})}function rs(e,t){return(ye(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function kf(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,a=Me(e),l=Rt(e,n),c=rt(e.extent)?Ue(l,e.extent,a):l;let u=Ue({x:i+c.x,y:s+c.y},o,a);e.extent==="parent"&&(u=Xi(u,a,t));const f=rs(e,r),d=t.internals.z??0;return{x:u.x,y:u.y,z:d>=f?d+1:f}}function Oo(e,t,n,o=[0,0]){const r=[],i=new Map;for(const s of e){const a=t.get(s.parentId);if(!a)continue;const l=i.get(s.parentId)?.expandedRect??ot(a),c=Wi(l,s.rect);i.set(s.parentId,{expandedRect:c,parent:a})}return i.size>0&&i.forEach(({expandedRect:s,parent:a},l)=>{const c=a.internals.positionAbsolute,u=Me(a),f=a.origin??o,d=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,h=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,g=Math.max(u.width,Math.round(s.width)),m=Math.max(u.height,Math.round(s.height)),y=(g-u.width)*f[0],x=(m-u.height)*f[1];(d>0||h>0||y||x)&&(r.push({id:l,type:"position",position:{x:a.position.x-d+y,y:a.position.y-h+x}}),n.get(l)?.forEach(S=>{e.some(p=>p.id===S.id)||r.push({id:S.id,type:"position",position:{x:S.position.x+d,y:S.position.y+h}})})),(u.width<s.width||u.height<s.height||d||h)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:g+(d?f[0]*d-y:0),height:m+(h?f[1]*h-x:0)}})}),r}function Rf(e,t,n,o,r,i){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const d of e.values()){const h=t.get(d.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}const g=Ro(d.nodeElement),m=h.measured.width!==g.width||h.measured.height!==g.height;if(!!(g.width&&g.height&&(m||!h.internals.handleBounds||d.force))){const x=d.nodeElement.getBoundingClientRect(),S=rt(h.extent)?h.extent:i;let{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=Xi(p,g,t.get(h.parentId)):S&&(p=Ue(p,S,g));const w={...h,measured:g,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:mr("source",d.nodeElement,x,u,h.id),target:mr("target",d.nodeElement,x,u,h.id)}}};t.set(h.id,w),h.parentId&&Io(w,t,n,{nodeOrigin:r}),a=!0,m&&(l.push({id:h.id,type:"dimensions",dimensions:g}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:ot(w,r)}))}}if(f.length>0){const d=Oo(f,t,n,r);l.push(...d)}return{changes:l,updatedInternals:a}}async function Mf({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Sr(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const c=o.get(s)||new Map;o.set(s,c.set(n,t))}}function is(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},c=`${r}-${s}--${i}-${a}`,u=`${i}-${a}--${r}-${s}`;Sr("source",l,u,e,r,s),Sr("target",l,c,e,i,a),t.set(o.id,o)}}function ss(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ss(n,t):!1}function _r(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Pf(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!ss(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&r.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function Un({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[s,a]of t){const l=n.get(s)?.internals.userNode;l&&r.push({...l,position:a.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function If({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,f=!1,d=null,h=!1,g=!1;function m({noDragClassName:x,handleSelector:S,domNode:p,isSelectable:w,nodeId:E,nodeClickDistance:A=0}){d=he(p);function T({x:D,y:$},z){const{nodeLookup:b,nodeExtent:N,snapGrid:_,snapToGrid:C,nodeOrigin:O,onNodeDrag:M,onSelectionDrag:L,onError:H,updateNodePositions:j}=t();i={x:D,y:$};let q=!1,F={x:0,y:0,x2:0,y2:0};if(a.size>1&&N){const G=Mt(a);F=ao(G)}for(const[G,Y]of a){if(!b.has(G))continue;let X={x:D-Y.distance.x,y:$-Y.distance.y};C&&(X=_n(X,_));let V=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];if(a.size>1&&N&&!Y.extent){const{positionAbsolute:ne}=Y.internals,Z=ne.x-F.x+N[0][0],Q=ne.x+Y.measured.width-F.x2+N[1][0],K=ne.y-F.y+N[0][1],oe=ne.y+Y.measured.height-F.y2+N[1][1];V=[[Z,K],[Q,oe]]}const{position:W,positionAbsolute:te}=qi({nodeId:G,nextPosition:X,nodeLookup:b,nodeExtent:V,nodeOrigin:O,onError:H});q=q||Y.position.x!==W.x||Y.position.y!==W.y,Y.position=W,Y.internals.positionAbsolute=te}if(g=g||q,!!q&&(j(a,!0),z&&(o||M||!E&&L))){const[G,Y]=Un({nodeId:E,dragItems:a,nodeLookup:b});o?.(z,a,G,Y),M?.(z,G,Y),E||L?.(z,Y)}}async function k(){if(!u)return;const{transform:D,panBy:$,autoPanSpeed:z,autoPanOnNodeDrag:b}=t();if(!b){l=!1,cancelAnimationFrame(s);return}const[N,_]=Yi(c,u,z);(N!==0||_!==0)&&(i.x=(i.x??0)-N/D[2],i.y=(i.y??0)-_/D[2],await $({x:N,y:_})&&T(i,null)),s=requestAnimationFrame(k)}function I(D){const{nodeLookup:$,multiSelectionActive:z,nodesDraggable:b,transform:N,snapGrid:_,snapToGrid:C,selectNodesOnDrag:O,onNodeDragStart:M,onSelectionDragStart:L,unselectNodesAndEdges:H}=t();f=!0,(!O||!w)&&!z&&E&&($.get(E)?.selected||H()),w&&O&&E&&e?.(E);const j=yt(D.sourceEvent,{transform:N,snapGrid:_,snapToGrid:C,containerBounds:u});if(i=j,a=Pf($,b,j,E),a.size>0&&(n||M||!E&&L)){const[q,F]=Un({nodeId:E,dragItems:a,nodeLookup:$});n?.(D.sourceEvent,a,q,F),M?.(D.sourceEvent,q,F),E||L?.(D.sourceEvent,F)}}const B=_i().clickDistance(A).on("start",D=>{const{domNode:$,nodeDragThreshold:z,transform:b,snapGrid:N,snapToGrid:_}=t();u=$?.getBoundingClientRect()||null,h=!1,g=!1,z===0&&I(D),i=yt(D.sourceEvent,{transform:b,snapGrid:N,snapToGrid:_,containerBounds:u}),c=Ee(D.sourceEvent,u)}).on("drag",D=>{const{autoPanOnNodeDrag:$,transform:z,snapGrid:b,snapToGrid:N,nodeDragThreshold:_,nodeLookup:C}=t(),O=yt(D.sourceEvent,{transform:z,snapGrid:b,snapToGrid:N,containerBounds:u});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||E&&!C.has(E))&&(h=!0),!h){if(!l&&$&&f&&(l=!0,k()),!f){const M=O.xSnapped-(i.x??0),L=O.ySnapped-(i.y??0);Math.sqrt(M*M+L*L)>_&&I(D)}(i.x!==O.xSnapped||i.y!==O.ySnapped)&&a&&f&&(c=Ee(D.sourceEvent,u),T(O,D.sourceEvent))}}).on("end",D=>{if(!(!f||h)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:$,updateNodePositions:z,onNodeDragStop:b,onSelectionDragStop:N}=t();if(g&&(z(a,!1),g=!1),r||b||!E&&N){const[_,C]=Un({nodeId:E,dragItems:a,nodeLookup:$,dragging:!1});r?.(D.sourceEvent,a,_,C),b?.(D.sourceEvent,_,C),E||N?.(D.sourceEvent,C)}}}).filter(D=>{const $=D.target;return!D.button&&(!x||!_r($,`.${x}`,p))&&(!S||_r($,S,p))});d.call(B)}function y(){d?.on(".drag",null)}return{update:m,destroy:y}}function Of(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())_t(r,ot(i))>0&&o.push(i);return o}const Df=250;function $f(e,t,n,o){let r=[],i=1/0;const s=Of(e,n,t+Df);for(const a of s){const l=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const c of l){if(o.nodeId===c.nodeId&&o.type===c.type&&o.id===c.id)continue;const{x:u,y:f}=Nt(a,c,c.position,!0),d=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(f-e.y,2));d>t||(d<i?(r=[{...c,x:u,y:f}],i=d):d===i&&r.push({...c,x:u,y:f}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(l=>l.type===a)??r[0]}return r[0]}function as(e,t,n,o,r,i=!1){const s=o.get(e);if(!s)return null;const a=r==="strict"?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(c=>c.id===n):a?.[0])??null;return l&&i?{...l,...Nt(s,l,l.position,!0)}:l}function cs(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Lf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ls=()=>!0;function Hf(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:f,panBy:d,cancelConnection:h,onConnectStart:g,onConnect:m,onConnectEnd:y,isValidConnection:x=ls,onReconnectEnd:S,updateConnection:p,getTransform:w,getFromHandle:E,autoPanSpeed:A,dragThreshold:T=1}){const k=Ki(e.target);let I=0,B;const{x:D,y:$}=Ee(e),z=k?.elementFromPoint(D,$),b=cs(i,z),N=a?.getBoundingClientRect();let _=!1;if(!N||!b)return;const C=as(r,b,o,l,t);if(!C)return;let O=Ee(e,N),M=!1,L=null,H=!1,j=null;function q(){if(!u||!N)return;const[ne,Z]=Yi(O,N,A);d({x:ne,y:Z}),I=requestAnimationFrame(q)}const F={...C,nodeId:r,type:b,position:C.position},G=l.get(r);let X={inProgress:!0,isValid:null,from:Nt(G,F,U.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:G,to:O,toHandle:null,toPosition:fr[F.position],toNode:null};function V(){_=!0,p(X),g?.(e,{nodeId:r,handleId:o,handleType:b})}T===0&&V();function W(ne){if(!_){const{x:oe,y:le}=Ee(ne),Ce=oe-D,Xe=le-$;if(!(Ce*Ce+Xe*Xe>T*T))return;V()}if(!E()||!F){te(ne);return}const Z=w();O=Ee(ne,N),B=$f(Pt(O,Z,!1,[1,1]),n,l,F),M||(q(),M=!0);const Q=us(ne,{handle:B,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:x,doc:k,lib:c,flowId:f,nodeLookup:l});j=Q.handleDomNode,L=Q.connection,H=Lf(!!B,Q.isValid);const K={...X,isValid:H,to:Q.toHandle&&H?fn({x:Q.toHandle.x,y:Q.toHandle.y},Z):O,toHandle:Q.toHandle,toPosition:H&&Q.toHandle?Q.toHandle.position:fr[F.position],toNode:Q.toHandle?l.get(Q.toHandle.nodeId):null};H&&B&&X.toHandle&&K.toHandle&&X.toHandle.type===K.toHandle.type&&X.toHandle.nodeId===K.toHandle.nodeId&&X.toHandle.id===K.toHandle.id&&X.to.x===K.to.x&&X.to.y===K.to.y||(p(K),X=K)}function te(ne){if(_){(B||j)&&L&&H&&m?.(L);const{inProgress:Z,...Q}=X,K={...Q,toPosition:X.toHandle?X.toPosition:null};y?.(ne,K),i&&S?.(ne,K)}h(),cancelAnimationFrame(I),M=!1,H=!1,L=null,j=null,k.removeEventListener("mousemove",W),k.removeEventListener("mouseup",te),k.removeEventListener("touchmove",W),k.removeEventListener("touchend",te)}k.addEventListener("mousemove",W),k.addEventListener("mouseup",te),k.addEventListener("touchmove",W),k.addEventListener("touchend",te)}function us(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:c=ls,nodeLookup:u}){const f=i==="target",d=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:g}=Ee(e),m=s.elementFromPoint(h,g),y=m?.classList.contains(`${a}-flow__handle`)?m:d,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const S=cs(void 0,y),p=y.getAttribute("data-nodeid"),w=y.getAttribute("data-handleid"),E=y.classList.contains("connectable"),A=y.classList.contains("connectableend");if(!p||!S)return x;const T={source:f?p:o,sourceHandle:f?w:r,target:f?o:p,targetHandle:f?r:w};x.connection=T;const I=E&&A&&(n===tt.Strict?f&&S==="source"||!f&&S==="target":p!==o||w!==r);x.isValid=I&&c(T),x.toHandle=as(p,S,w,u,n,!0)}return x}const fo={onPointerDown:Hf,isValid:us};function zf({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=he(e);function i({translateExtent:a,width:l,height:c,zoomStep:u=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const g=p=>{const w=n();if(p.sourceEvent.type!=="wheel"||!t)return;const E=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*u,A=w[2]*Math.pow(2,E);t.scaleTo(A)};let m=[0,0];const y=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(m=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},x=p=>{const w=n();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;const E=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],A=[E[0]-m[0],E[1]-m[1]];m=E;const T=o()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),k={x:w[0]-A[0]*T,y:w[1]-A[1]*T},I=[[0,0],[l,c]];t.setViewportConstrained({x:k.x,y:k.y,zoom:w[2]},I,a)},S=zi().on("start",y).on("zoom",f?x:null).on("zoom.wheel",d?g:null);r.call(S,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:ge}}const Bf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Nn=e=>({x:e.x,y:e.y,zoom:e.k}),qn=({x:e,y:t,zoom:n})=>vn.translate(e,t).scale(n),Ze=(e,t)=>e.target.closest(`.${t}`),ds=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),jf=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Xn=(e,t=0,n=jf,o=()=>{})=>{const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},fs=e=>{const t=e.ctrlKey&&hn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Ff({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Ze(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&s){const y=ge(u),x=fs(u),S=f*Math.pow(2,x);o.scaleTo(n,S,y,u);return}const d=u.deltaMode===1?20:1;let h=r===Be.Vertical?0:u.deltaX*d,g=r===Be.Horizontal?0:u.deltaY*d;!hn()&&u.shiftKey&&r!==Be.Vertical&&(h=u.deltaY*d,g=0),o.translateBy(n,-(h/f)*i,-(g/f)*i,{internal:!0});const m=Nn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(u,m)),e.isPanScrolling&&(l?.(u,m),e.panScrollTimeout=setTimeout(()=>{c?.(u,m),e.isPanScrolling=!1},150))}}function Vf({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const i=o.type==="wheel",s=!t&&i&&!o.ctrlKey,a=Ze(o,e);if(o.ctrlKey&&i&&a&&o.preventDefault(),s||a)return null;o.preventDefault(),n.call(this,o,r)}}function Uf({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=Nn(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function qf({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!!(n&&ds(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Nn(i.transform))}}function Xf({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&ds(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Bf(e.prevViewport,s.transform))){const a=Nn(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(s.sourceEvent,a)},n?150:0)}}}function Yf({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{const f=e||t,d=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Ze(u,`${c}-flow__node`)||Ze(u,`${c}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||Ze(u,a)&&u.type==="wheel"||Ze(u,l)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&u.touches?.length>1)return u.preventDefault(),!1;if(!f&&!r&&!d&&u.type==="wheel"||!o&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(o)&&!o.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(o)&&o.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function Wf({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=zi().clickDistance(!ye(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=he(e).call(d);p({x:i.x,y:i.y,zoom:nt(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const g=h.on("wheel.zoom"),m=h.on("dblclick.zoom");d.wheelDelta(fs);function y($,z){return h?new Promise(b=>{d?.interpolate(z?.interpolate==="linear"?mt:Zt).transform(Xn(h,z?.duration,z?.ease,()=>b(!0)),$)}):Promise.resolve(!1)}function x({noWheelClassName:$,noPanClassName:z,onPaneContextMenu:b,userSelectionActive:N,panOnScroll:_,panOnDrag:C,panOnScrollMode:O,panOnScrollSpeed:M,preventScrolling:L,zoomOnPinch:H,zoomOnScroll:j,zoomOnDoubleClick:q,zoomActivationKeyPressed:F,lib:G,onTransformChange:Y}){N&&!u.isZoomingOrPanning&&S();const V=_&&!F&&!N?Ff({zoomPanValues:u,noWheelClassName:$,d3Selection:h,d3Zoom:d,panOnScrollMode:O,panOnScrollSpeed:M,zoomOnPinch:H,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):Vf({noWheelClassName:$,preventScrolling:L,d3ZoomHandler:g});if(h.on("wheel.zoom",V,{passive:!1}),!N){const te=Uf({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});d.on("start",te);const ne=qf({zoomPanValues:u,panOnDrag:C,onPaneContextMenu:!!b,onPanZoom:s,onTransformChange:Y});d.on("zoom",ne);const Z=Xf({zoomPanValues:u,panOnDrag:C,panOnScroll:_,onPaneContextMenu:b,onPanZoomEnd:l,onDraggingChange:c});d.on("end",Z)}const W=Yf({zoomActivationKeyPressed:F,panOnDrag:C,zoomOnScroll:j,panOnScroll:_,zoomOnDoubleClick:q,zoomOnPinch:H,userSelectionActive:N,noPanClassName:z,noWheelClassName:$,lib:G});d.filter(W),q?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function S(){d.on("zoom",null)}async function p($,z,b){const N=qn($),_=d?.constrain()(N,z,b);return _&&await y(_),new Promise(C=>C(_))}async function w($,z){const b=qn($);return await y(b,z),new Promise(N=>N(b))}function E($){if(h){const z=qn($),b=h.property("__zoom");(b.k!==$.zoom||b.x!==$.x||b.y!==$.y)&&d?.transform(h,z,null,{sync:!0})}}function A(){const $=h?Hi(h.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function T($,z){return h?new Promise(b=>{d?.interpolate(z?.interpolate==="linear"?mt:Zt).scaleTo(Xn(h,z?.duration,z?.ease,()=>b(!0)),$)}):Promise.resolve(!1)}function k($,z){return h?new Promise(b=>{d?.interpolate(z?.interpolate==="linear"?mt:Zt).scaleBy(Xn(h,z?.duration,z?.ease,()=>b(!0)),$)}):Promise.resolve(!1)}function I($){d?.scaleExtent($)}function B($){d?.translateExtent($)}function D($){const z=!ye($)||$<0?0:$;d?.clickDistance(z)}return{update:x,destroy:S,setViewport:w,setViewportConstrained:p,getViewport:A,scaleTo:T,scaleBy:k,setScaleExtent:I,setTranslateExtent:B,syncViewport:E,setClickDistance:D}}var it;(function(e){e.Line="line",e.Handle="handle"})(it||(it={}));function Zf({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=e-t,a=n-o,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(l[0]=l[0]*-1),a&&i&&(l[1]=l[1]*-1),l}function Gf(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Pe(e,t){return Math.max(0,t-e)}function Ie(e,t){return Math.max(0,e-t)}function qt(e,t,n){return Math.max(0,t-e,e-n)}function Nr(e,t){return e?!t:t}function Kf(e,t,n,o,r,i,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:f}=t,d=u&&f,{xSnapped:h,ySnapped:g}=n,{minWidth:m,maxWidth:y,minHeight:x,maxHeight:S}=o,{x:p,y:w,width:E,height:A,aspectRatio:T}=e;let k=Math.floor(u?h-e.pointerX:0),I=Math.floor(f?g-e.pointerY:0);const B=E+(l?-k:k),D=A+(c?-I:I),$=-i[0]*E,z=-i[1]*A;let b=qt(B,m,y),N=qt(D,x,S);if(s){let O=0,M=0;l&&k<0?O=Pe(p+k+$,s[0][0]):!l&&k>0&&(O=Ie(p+B+$,s[1][0])),c&&I<0?M=Pe(w+I+z,s[0][1]):!c&&I>0&&(M=Ie(w+D+z,s[1][1])),b=Math.max(b,O),N=Math.max(N,M)}if(a){let O=0,M=0;l&&k>0?O=Ie(p+k,a[0][0]):!l&&k<0&&(O=Pe(p+B,a[1][0])),c&&I>0?M=Ie(w+I,a[0][1]):!c&&I<0&&(M=Pe(w+D,a[1][1])),b=Math.max(b,O),N=Math.max(N,M)}if(r){if(u){const O=qt(B/T,x,S)*T;if(b=Math.max(b,O),s){let M=0;!l&&!c||l&&!c&&d?M=Ie(w+z+B/T,s[1][1])*T:M=Pe(w+z+(l?k:-k)/T,s[0][1])*T,b=Math.max(b,M)}if(a){let M=0;!l&&!c||l&&!c&&d?M=Pe(w+B/T,a[1][1])*T:M=Ie(w+(l?k:-k)/T,a[0][1])*T,b=Math.max(b,M)}}if(f){const O=qt(D*T,m,y)/T;if(N=Math.max(N,O),s){let M=0;!l&&!c||c&&!l&&d?M=Ie(p+D*T+$,s[1][0])/T:M=Pe(p+(c?I:-I)*T+$,s[0][0])/T,N=Math.max(N,M)}if(a){let M=0;!l&&!c||c&&!l&&d?M=Pe(p+D*T,a[1][0])/T:M=Ie(p+(c?I:-I)*T,a[0][0])/T,N=Math.max(N,M)}}}I=I+(I<0?N:-N),k=k+(k<0?b:-b),r&&(d?B>D*T?I=(Nr(l,c)?-k:k)/T:k=(Nr(l,c)?-I:I)*T:u?(I=k/T,c=l):(k=I*T,l=c));const _=l?p+k:p,C=c?w+I:w;return{width:E+(l?-k:k),height:A+(c?-I:I),x:i[0]*k*(l?-1:1)+_,y:i[1]*I*(c?-1:1)+C}}const hs={width:0,height:0,x:0,y:0},Jf={...hs,pointerX:0,pointerY:0,aspectRatio:1};function Qf(e){return[[0,0],[e.measured.width,e.measured.height]]}function eh(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,l=n[1]*s;return[[o-a,r-l],[o+i-a,r+s-l]]}function th({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=he(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:u,resizeDirection:f,onResizeStart:d,onResize:h,onResizeEnd:g,shouldResize:m}){let y={...hs},x={...Jf};const S=Gf(l);let p,w=null,E=[],A,T,k;const I=_i().on("start",B=>{const{nodeLookup:D,transform:$,snapGrid:z,snapToGrid:b,nodeOrigin:N,paneDomNode:_}=n();if(p=D.get(t),!p)return;w=_?.getBoundingClientRect()??null;const{xSnapped:C,ySnapped:O}=yt(B.sourceEvent,{transform:$,snapGrid:z,snapToGrid:b,containerBounds:w});y={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},x={...y,pointerX:C,pointerY:O,aspectRatio:y.width/y.height},A=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(A=D.get(p.parentId),T=A&&p.extent==="parent"?Qf(A):void 0),E=[],k=void 0;for(const[M,L]of D)if(L.parentId===t&&(E.push({id:M,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const H=eh(L,p,L.origin??N);k?k=[[Math.min(H[0][0],k[0][0]),Math.min(H[0][1],k[0][1])],[Math.max(H[1][0],k[1][0]),Math.max(H[1][1],k[1][1])]]:k=H}d?.(B,{...y})}).on("drag",B=>{const{transform:D,snapGrid:$,snapToGrid:z,nodeOrigin:b}=n(),N=yt(B.sourceEvent,{transform:D,snapGrid:$,snapToGrid:z,containerBounds:w}),_=[];if(!p)return;const{x:C,y:O,width:M,height:L}=y,H={},j=p.origin??b,{width:q,height:F,x:G,y:Y}=Kf(x,S,N,c,u,j,T,k),X=q!==M,V=F!==L,W=G!==C&&X,te=Y!==O&&V;if(!W&&!te&&!X&&!V)return;if((W||te||j[0]===1||j[1]===1)&&(H.x=W?G:y.x,H.y=te?Y:y.y,y.x=H.x,y.y=H.y,E.length>0)){const K=G-C,oe=Y-O;for(const le of E)le.position={x:le.position.x-K+j[0]*(q-M),y:le.position.y-oe+j[1]*(F-L)},_.push(le)}if((X||V)&&(H.width=X&&(!f||f==="horizontal")?q:y.width,H.height=V&&(!f||f==="vertical")?F:y.height,y.width=H.width,y.height=H.height),A&&p.expandParent){const K=j[0]*(H.width??0);H.x&&H.x<K&&(y.x=K,x.x=x.x-(H.x-K));const oe=j[1]*(H.height??0);H.y&&H.y<oe&&(y.y=oe,x.y=x.y-(H.y-oe))}const ne=Zf({width:y.width,prevWidth:M,height:y.height,prevHeight:L,affectsX:S.affectsX,affectsY:S.affectsY}),Z={...y,direction:ne};m?.(B,Z)!==!1&&(h?.(B,Z),o(H,_))}).on("end",B=>{g?.(B,{...y}),r?.({...y})});i.call(I)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}const nh={},Cr=e=>{let t;const n=new Set,o=(u,f)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(g=>g(t,h))}},r=()=>t,l={setState:o,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(nh?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(o,r,l);return l},oh=e=>e?Cr(e):Cr,{useDebugValue:rh}=Sc,{useSyncExternalStoreWithSelector:ih}=Ec,sh=e=>e;function ps(e,t=sh,n){const o=ih(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rh(o),o}const Ar=(e,t)=>{const n=oh(e),o=(r,i=t)=>ps(n,r,i);return Object.assign(o,n),o},ah=(e,t)=>e?Ar(e,t):Ar;function ie(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Cn=P.createContext(null),ch=Cn.Provider,gs=_e.error001();function ee(e,t){const n=P.useContext(Cn);if(n===null)throw new Error(gs);return ps(n,e,t)}function re(){const e=P.useContext(Cn);if(e===null)throw new Error(gs);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Tr={display:"none"},lh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ms="react-flow__node-desc",ys="react-flow__edge-desc",uh="react-flow__aria-live",dh=e=>e.ariaLiveMessage,fh=e=>e.ariaLabelConfig;function hh({rfId:e}){const t=ee(dh);return v.jsx("div",{id:`${uh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:lh,children:t})}function ph({rfId:e,disableKeyboardA11y:t}){const n=ee(fh);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${ms}-${e}`,style:Tr,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${ys}-${e}`,style:Tr,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(hh,{rfId:e})]})}const An=P.forwardRef(({position:e="top-left",children:t,className:n,style:o,...r},i)=>{const s=`${e}`.split("-");return v.jsx("div",{className:ae(["react-flow__panel",n,...s]),style:o,ref:i,...r,children:t})});An.displayName="Panel";function gh({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(An,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const mh=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Xt=e=>e.id;function yh(e,t){return ie(e.selectedNodes.map(Xt),t.selectedNodes.map(Xt))&&ie(e.selectedEdges.map(Xt),t.selectedEdges.map(Xt))}function xh({onSelectionChange:e}){const t=re(),{selectedNodes:n,selectedEdges:o}=ee(mh,yh);return P.useEffect(()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}const wh=e=>!!e.onSelectionChangeHandlers;function bh({onSelectionChange:e}){const t=ee(wh);return e||t?v.jsx(xh,{onSelectionChange:e}):null}const xs=[0,0],vh={x:0,y:0,zoom:1},Eh=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],kr=[...Eh,"rfId"],Sh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Rr={translateExtent:Et,nodeOrigin:xs,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function _h(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=ee(Sh,ie),u=re();P.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=Rr,a()}),[]);const f=P.useRef(Rr);return P.useEffect(()=>{for(const d of kr){const h=e[d],g=f.current[d];h!==g&&(typeof e[d]>"u"||(d==="nodes"?t(h):d==="edges"?n(h):d==="minZoom"?o(h):d==="maxZoom"?r(h):d==="translateExtent"?i(h):d==="nodeExtent"?s(h):d==="paneClickDistance"?c(h):d==="ariaLabelConfig"?u.setState({ariaLabelConfig:pf(h)}):d==="fitView"?u.setState({fitViewQueued:h}):d==="fitViewOptions"?u.setState({fitViewOptions:h}):u.setState({[d]:h})))}f.current=e},kr.map(d=>e[d])),null}function Mr(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Nh(e){const[t,n]=P.useState(e==="system"?null:e);return P.useEffect(()=>{if(e!=="system"){n(e);return}const o=Mr(),r=()=>n(o?.matches?"dark":"light");return r(),o?.addEventListener("change",r),()=>{o?.removeEventListener("change",r)}},[e]),t!==null?t:Mr()?.matches?"dark":"light"}const Pr=typeof document<"u"?document:null;function Ct(e=null,t={target:Pr,actInsideInputWithModifier:!0}){const[n,o]=P.useState(!1),r=P.useRef(!1),i=P.useRef(new Set([])),[s,a]=P.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=c.reduce((f,d)=>f.concat(...d),[]);return[c,u]}return[[],[]]},[e]);return P.useEffect(()=>{const l=t?.target??Pr,c=t?.actInsideInputWithModifier??!0;if(e!==null){const u=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!r.current||r.current&&!c)&&Ji(h))return!1;const m=Or(h.code,a);if(i.current.add(h[m]),Ir(s,i.current,!1)){const y=h.composedPath?.()?.[0]||h.target,x=y?.nodeName==="BUTTON"||y?.nodeName==="A";t.preventDefault!==!1&&(r.current||!x)&&h.preventDefault(),o(!0)}},f=h=>{const g=Or(h.code,a);Ir(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(h[g]),h.key==="Meta"&&i.current.clear(),r.current=!1},d=()=>{i.current.clear(),o(!1)};return l?.addEventListener("keydown",u),l?.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{l?.removeEventListener("keydown",u),l?.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,o]),n}function Ir(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Or(e,t){return t.includes(e)?"code":"key"}const Ch=()=>{const e=re();return P.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=ko(t,o,r,i,s,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:r,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),c={x:t.x-a,y:t.y-l},u=n.snapGrid??r,f=n.snapToGrid??i;return Pt(c,o,f,u)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),s=fn(t,n);return{x:s.x+r,y:s.y+i}}}),[])};function ws(e,t){const n=[],o=new Map,r=[];for(const i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const s=o.get(i.id);s?s.push(i):o.set(i.id,[i])}for(const i of t){const s=o.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const l of s)Ah(l,a);n.push(a)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Ah(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function bs(e,t){return ws(e,t)}function vs(e,t){return ws(e,t)}function $e(e,t){return{id:e,type:"select",selected:t}}function Ge(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push($e(i.id,s)))}return o}function Dr({items:e=[],lookup:t}){const n=[],o=new Map(e.map(r=>[r.id,r]));for(const[r,i]of e.entries()){const s=t.get(i.id),a=s?.internals?.userNode??s;a!==void 0&&a!==i&&n.push({id:i.id,item:i,type:"replace"}),a===void 0&&n.push({item:i,type:"add",index:r})}for(const[r]of t)o.get(r)===void 0&&n.push({id:r,type:"remove"});return n}function $r(e){return{id:e.id,type:"remove"}}const Lr=e=>of(e),Th=e=>Ui(e);function Es(e){return P.forwardRef(e)}const kh=typeof window<"u"?P.useLayoutEffect:P.useEffect;function Hr(e){const[t,n]=P.useState(BigInt(0)),[o]=P.useState(()=>Rh(()=>n(r=>r+BigInt(1))));return kh(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function Rh(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Ss=P.createContext(null);function Mh({children:e}){const t=re(),n=P.useCallback(a=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:u,onNodesChange:f,nodeLookup:d,fitViewQueued:h}=t.getState();let g=l;for(const y of a)g=typeof y=="function"?y(g):y;const m=Dr({items:g,lookup:d});u&&c(g),m.length>0?f?.(m):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:y,nodes:x,setNodes:S}=t.getState();y&&S(x)})},[]),o=Hr(n),r=P.useCallback(a=>{const{edges:l=[],setEdges:c,hasDefaultEdges:u,onEdgesChange:f,edgeLookup:d}=t.getState();let h=l;for(const g of a)h=typeof g=="function"?g(h):g;u?c(h):f&&f(Dr({items:h,lookup:d}))},[]),i=Hr(r),s=P.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return v.jsx(Ss.Provider,{value:s,children:e})}function Ph(){const e=P.useContext(Ss);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Ih=e=>!!e.panZoom;function Do(){const e=Ch(),t=re(),n=Ph(),o=ee(Ih),r=P.useMemo(()=>{const i=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState(),g=Lr(f)?f:d.get(f.id),m=g.parentId?Gi(g.position,g.measured,g.parentId,d,h):g.position,y={...g,position:m,width:g.measured?.width??g.width,height:g.measured?.height??g.height};return ot(y)},c=(f,d,h={replace:!1})=>{s(g=>g.map(m=>{if(m.id===f){const y=typeof d=="function"?d(m):d;return h.replace&&Lr(y)?y:{...m,...y}}return m}))},u=(f,d,h={replace:!1})=>{a(g=>g.map(m=>{if(m.id===f){const y=typeof d=="function"?d(m):d;return h.replace&&Th(y)?y:{...m,...y}}return m}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>i(f)?.internals.userNode,getInternalNode:i,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(d=>({...d}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=t.getState(),[g,m,y]=h;return{nodes:f.map(x=>({...x})),edges:d.map(x=>({...x})),viewport:{x:g,y:m,zoom:y}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:g,onNodesDelete:m,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:S,onDelete:p,onBeforeDelete:w}=t.getState(),{nodes:E,edges:A}=await lf({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:g,onBeforeDelete:w}),T=A.length>0,k=E.length>0;if(T){const I=A.map($r);y?.(A),S(I)}if(k){const I=E.map($r);m?.(E),x(I)}return(k||T)&&p?.({nodes:E,edges:A}),{deletedNodes:E,deletedEdges:A}},getIntersectingNodes:(f,d=!0,h)=>{const g=pr(f),m=g?f:l(f),y=h!==void 0;return m?(h||t.getState().nodes).filter(x=>{const S=t.getState().nodeLookup.get(x.id);if(S&&!g&&(x.id===f.id||!S.internals.positionAbsolute))return!1;const p=ot(y?x:S),w=_t(p,m);return d&&w>0||w>=p.width*p.height||w>=m.width*m.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const m=pr(f)?f:l(f);if(!m)return!1;const y=_t(m,d);return h&&y>0||y>=m.width*m.height},updateNode:c,updateNodeData:(f,d,h={replace:!1})=>{c(f,g=>{const m=typeof d=="function"?d(g):d;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},updateEdge:u,updateEdgeData:(f,d,h={replace:!1})=>{u(f,g=>{const m=typeof d=="function"?d(g):d;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return rf(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:d,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const d=t.getState().fitViewResolver??hf();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return P.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])}const zr=e=>e.selected,Oh=typeof window<"u"?window:void 0;function Dh({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=re(),{deleteElements:o}=Do(),r=Ct(e,{actInsideInputWithModifier:!1}),i=Ct(t,{target:Oh});P.useEffect(()=>{if(r){const{edges:s,nodes:a}=n.getState();o({nodes:a.filter(zr),edges:s.filter(zr)}),n.setState({nodesSelectionActive:!1})}},[r]),P.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function $h(e){const t=re();P.useEffect(()=>{const n=()=>{if(!e.current)return!1;const o=Ro(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",_e.error004()),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const Tn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Lh=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Hh({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=Be.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:c,minZoom:u,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:g,noWheelClassName:m,noPanClassName:y,onViewportChange:x,isControlledViewport:S,paneClickDistance:p}){const w=re(),E=P.useRef(null),{userSelectionActive:A,lib:T}=ee(Lh,ie),k=Ct(d),I=P.useRef();$h(E);const B=P.useCallback(D=>{x?.({x:D[0],y:D[1],zoom:D[2]}),S||w.setState({transform:D})},[x,S]);return P.useEffect(()=>{if(E.current){I.current=Wf({domNode:E.current,minZoom:u,maxZoom:f,translateExtent:c,viewport:l,paneClickDistance:p,onDraggingChange:b=>w.setState({paneDragging:b}),onPanZoomStart:(b,N)=>{const{onViewportChangeStart:_,onMoveStart:C}=w.getState();C?.(b,N),_?.(N)},onPanZoom:(b,N)=>{const{onViewportChange:_,onMove:C}=w.getState();C?.(b,N),_?.(N)},onPanZoomEnd:(b,N)=>{const{onViewportChangeEnd:_,onMoveEnd:C}=w.getState();C?.(b,N),_?.(N)}});const{x:D,y:$,zoom:z}=I.current.getViewport();return w.setState({panZoom:I.current,transform:[D,$,z],domNode:E.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),P.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:k,preventScrolling:h,noPanClassName:y,userSelectionActive:A,noWheelClassName:m,lib:T,onTransformChange:B})},[e,t,n,o,r,i,s,a,k,h,y,A,m,T,B]),v.jsx("div",{className:"react-flow__renderer",ref:E,style:Tn,children:g})}const zh=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Bh(){const{userSelectionActive:e,userSelectionRect:t}=ee(zh,ie);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Yn=(e,t)=>n=>{n.target===t.current&&e?.(n)},jh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Fh({isSelecting:e,selectionKeyPressed:t,selectionMode:n=St.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:d,children:h}){const g=re(),{userSelectionActive:m,elementsSelectable:y,dragging:x,connectionInProgress:S}=ee(jh,ie),p=y&&(e||m),w=P.useRef(null),E=P.useRef(),A=P.useRef(new Set),T=P.useRef(new Set),k=P.useRef(!1),I=P.useRef(!1),B=C=>{if(k.current||S){k.current=!1;return}a?.(C),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=C=>{if(Array.isArray(o)&&o?.includes(2)){C.preventDefault();return}l?.(C)},$=c?C=>c(C):void 0,z=C=>{const{resetSelectedElements:O,domNode:M}=g.getState();if(E.current=M?.getBoundingClientRect(),!y||!e||C.button!==0||C.target!==w.current||!E.current)return;C.target?.setPointerCapture?.(C.pointerId),I.current=!0,k.current=!1;const{x:L,y:H}=Ee(C.nativeEvent,E.current);O(),g.setState({userSelectionRect:{width:0,height:0,startX:L,startY:H,x:L,y:H}}),i?.(C)},b=C=>{const{userSelectionRect:O,transform:M,nodeLookup:L,edgeLookup:H,connectionLookup:j,triggerNodeChanges:q,triggerEdgeChanges:F,defaultEdgeOptions:G}=g.getState();if(!E.current||!O)return;k.current=!0;const{x:Y,y:X}=Ee(C.nativeEvent,E.current),{startX:V,startY:W}=O,te={startX:V,startY:W,x:Y<V?Y:V,y:X<W?X:W,width:Math.abs(Y-V),height:Math.abs(X-W)},ne=A.current,Z=T.current;A.current=new Set(To(L,te,M,n===St.Partial,!0).map(K=>K.id)),T.current=new Set;const Q=G?.selectable??!0;for(const K of A.current){const oe=j.get(K);if(oe)for(const{edgeId:le}of oe.values()){const Ce=H.get(le);Ce&&(Ce.selectable??Q)&&T.current.add(le)}}if(!gr(ne,A.current)){const K=Ge(L,A.current,!0);q(K)}if(!gr(Z,T.current)){const K=Ge(H,T.current);F(K)}g.setState({userSelectionRect:te,userSelectionActive:!0,nodesSelectionActive:!1})},N=C=>{if(C.button!==0||!I.current)return;C.target?.releasePointerCapture?.(C.pointerId);const{userSelectionRect:O}=g.getState();!m&&O&&C.target===w.current&&B?.(C),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),s?.(C),(t||r)&&(k.current=!1),I.current=!1},_=o===!0||Array.isArray(o)&&o.includes(0);return v.jsxs("div",{className:ae(["react-flow__pane",{draggable:_,dragging:x,selection:e}]),onClick:p?void 0:Yn(B,w),onContextMenu:Yn(D,w),onWheel:Yn($,w),onPointerEnter:p?void 0:u,onPointerDown:p?z:f,onPointerMove:p?b:f,onPointerUp:p?N:void 0,onPointerLeave:d,ref:w,style:Tn,children:[h,v.jsx(Bh,{})]})}function ho({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),c=a.get(e);if(!c){l?.("012",_e.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])}function _s({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){const a=re(),[l,c]=P.useState(!1),u=P.useRef();return P.useEffect(()=>{u.current=If({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{ho({id:f,store:a,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),P.useEffect(()=>{if(t)u.current?.destroy();else if(e.current)return u.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{u.current?.destroy()}},[n,o,t,i,e,r]),l}const Vh=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Ns(){const e=re();return P.useCallback(n=>{const{nodeExtent:o,snapToGrid:r,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:c,nodeOrigin:u}=e.getState(),f=new Map,d=Vh(s),h=r?i[0]:5,g=r?i[1]:5,m=n.direction.x*h*n.factor,y=n.direction.y*g*n.factor;for(const[,x]of c){if(!d(x))continue;let S={x:x.internals.positionAbsolute.x+m,y:x.internals.positionAbsolute.y+y};r&&(S=_n(S,i));const{position:p,positionAbsolute:w}=qi({nodeId:x.id,nextPosition:S,nodeLookup:c,nodeExtent:o,nodeOrigin:u,onError:a});x.position=p,x.internals.positionAbsolute=w,f.set(x.id,x)}l(f)},[])}const $o=P.createContext(null),Uh=$o.Provider;$o.Consumer;const Cs=()=>P.useContext($o),qh=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Xh=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:a,toHandle:l,isValid:c}=s,u=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:u,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===tt.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,clickConnectionInProcess:!!r,valid:u&&c}};function Yh({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:f,...d},h){const g=s||null,m=e==="target",y=re(),x=Cs(),{connectOnClick:S,noPanClassName:p,rfId:w}=ee(qh,ie),{connectingFrom:E,connectingTo:A,clickConnecting:T,isPossibleEndHandle:k,connectionInProcess:I,clickConnectionInProcess:B,valid:D}=ee(Xh(x,g,e),ie);x||y.getState().onError?.("010",_e.error010());const $=N=>{const{defaultEdgeOptions:_,onConnect:C,hasDefaultEdges:O}=y.getState(),M={..._,...N};if(O){const{edges:L,setEdges:H}=y.getState();H(bf(M,L))}C?.(M),a?.(M)},z=N=>{if(!x)return;const _=Qi(N.nativeEvent);if(r&&(_&&N.button===0||!_)){const C=y.getState();fo.onPointerDown(N.nativeEvent,{autoPanOnConnect:C.autoPanOnConnect,connectionMode:C.connectionMode,connectionRadius:C.connectionRadius,domNode:C.domNode,nodeLookup:C.nodeLookup,lib:C.lib,isTarget:m,handleId:g,nodeId:x,flowId:C.rfId,panBy:C.panBy,cancelConnection:C.cancelConnection,onConnectStart:C.onConnectStart,onConnectEnd:C.onConnectEnd,updateConnection:C.updateConnection,onConnect:$,isValidConnection:n||C.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:C.autoPanSpeed,dragThreshold:C.connectionDragThreshold})}_?u?.(N):f?.(N)},b=N=>{const{onClickConnectStart:_,onClickConnectEnd:C,connectionClickStartHandle:O,connectionMode:M,isValidConnection:L,lib:H,rfId:j,nodeLookup:q,connection:F}=y.getState();if(!x||!O&&!r)return;if(!O){_?.(N.nativeEvent,{nodeId:x,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const G=Ki(N.target),Y=n||L,{connection:X,isValid:V}=fo.isValid(N.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:M,fromNodeId:O.nodeId,fromHandleId:O.id||null,fromType:O.type,isValidConnection:Y,flowId:j,doc:G,lib:H,nodeLookup:q});V&&X&&$(X);const W=structuredClone(F);delete W.inProgress,W.toPosition=W.toHandle?W.toHandle.position:null,C?.(N,W),y.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${w}-${x}-${g}-${e}`,className:ae(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,c,{source:!m,target:m,connectable:o,connectablestart:r,connectableend:i,clickconnecting:T,connectingfrom:E,connectingto:A,valid:D,connectionindicator:o&&(!I||k)&&(I||B?i:r)}]),onMouseDown:z,onTouchStart:z,onClick:S?b:void 0,ref:h,...d,children:l})}const De=P.memo(Es(Yh));function Wh({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(De,{type:"source",position:n,isConnectable:t})]})}function Zh({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(De,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(De,{type:"source",position:o,isConnectable:t})]})}function Gh(){return null}function Kh({data:e,isConnectable:t,targetPosition:n=U.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(De,{type:"target",position:n,isConnectable:t}),e?.label]})}const pn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Br={input:Wh,default:Zh,output:Kh,group:Gh};function Jh(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Qh=e=>{const{width:t,height:n,x:o,y:r}=Mt(e.nodeLookup,{filter:i=>!!i.selected});return{width:ye(t)?t:null,height:ye(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function ep({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=re(),{width:r,height:i,transformString:s,userSelectionActive:a}=ee(Qh,ie),l=Ns(),c=P.useRef(null);if(P.useEffect(()=>{n||c.current?.focus({preventScroll:!0})},[n]),_s({nodeRef:c}),a||!r||!i)return null;const u=e?d=>{const h=o.getState().nodes.filter(g=>g.selected);e(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(pn,d.key)&&(d.preventDefault(),l({direction:pn[d.key],factor:d.shiftKey?4:1}))};return v.jsx("div",{className:ae(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:v.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:i}})})}const jr=typeof window<"u"?window:void 0,tp=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function As({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:u,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:m,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:p,panOnScroll:w,panOnScrollSpeed:E,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:k,defaultViewport:I,translateExtent:B,minZoom:D,maxZoom:$,preventScrolling:z,onSelectionContextMenu:b,noWheelClassName:N,noPanClassName:_,disableKeyboardA11y:C,onViewportChange:O,isControlledViewport:M}){const{nodesSelectionActive:L,userSelectionActive:H}=ee(tp),j=Ct(c,{target:jr}),q=Ct(m,{target:jr}),F=q||k,G=q||w,Y=u&&F!==!0,X=j||H||Y;return Dh({deleteKeyCode:l,multiSelectionKeyCode:g}),v.jsx(Hh,{onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:p,panOnScroll:G,panOnScrollSpeed:E,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:!j&&F,defaultViewport:I,translateExtent:B,minZoom:D,maxZoom:$,zoomActivationKeyCode:y,preventScrolling:z,noWheelClassName:N,noPanClassName:_,onViewportChange:O,isControlledViewport:M,paneClickDistance:a,children:v.jsxs(Fh,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!X,selectionMode:f,selectionKeyPressed:j,selectionOnDrag:Y,children:[e,L&&v.jsx(ep,{onSelectionContextMenu:b,noPanClassName:_,disableKeyboardA11y:C})]})})}As.displayName="FlowRenderer";const np=P.memo(As),op=e=>t=>e?To(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function rp(e){return ee(P.useCallback(op(e),[e]),ie)}const ip=e=>e.updateNodeInternals;function sp(){const e=ee(ip),[t]=P.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return P.useEffect(()=>()=>{t?.disconnect()},[t]),t}function ap({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=re(),i=P.useRef(null),s=P.useRef(null),a=P.useRef(e.sourcePosition),l=P.useRef(e.targetPosition),c=P.useRef(t),u=n&&!!e.internals.handleBounds;return P.useEffect(()=>{i.current&&!e.hidden&&(!u||s.current!==i.current)&&(s.current&&o?.unobserve(s.current),o?.observe(i.current),s.current=i.current)},[u,e.hidden]),P.useEffect(()=>()=>{s.current&&(o?.unobserve(s.current),s.current=null)},[]),P.useEffect(()=>{if(i.current){const f=c.current!==t,d=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(f||d||h)&&(c.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function cp({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:c,nodesFocusable:u,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:g,rfId:m,nodeTypes:y,nodeClickDistance:x,onError:S}){const{node:p,internals:w,isParent:E}=ee(V=>{const W=V.nodeLookup.get(e),te=V.parentLookup.has(e);return{node:W,internals:W.internals,isParent:te}},ie);let A=p.type||"default",T=y?.[A]||Br[A];T===void 0&&(S?.("003",_e.error003(A)),A="default",T=y?.default||Br.default);const k=!!(p.draggable||a&&typeof p.draggable>"u"),I=!!(p.selectable||l&&typeof p.selectable>"u"),B=!!(p.connectable||c&&typeof p.connectable>"u"),D=!!(p.focusable||u&&typeof p.focusable>"u"),$=re(),z=Zi(p),b=ap({node:p,nodeType:A,hasDimensions:z,resizeObserver:f}),N=_s({nodeRef:b,disabled:p.hidden||!k,noDragClassName:d,handleSelector:p.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:x}),_=Ns();if(p.hidden)return null;const C=Me(p),O=Jh(p),M=I||k||t||n||o||r,L=n?V=>n(V,{...w.userNode}):void 0,H=o?V=>o(V,{...w.userNode}):void 0,j=r?V=>r(V,{...w.userNode}):void 0,q=i?V=>i(V,{...w.userNode}):void 0,F=s?V=>s(V,{...w.userNode}):void 0,G=V=>{const{selectNodesOnDrag:W,nodeDragThreshold:te}=$.getState();I&&(!W||!k||te>0)&&ho({id:e,store:$,nodeRef:b}),t&&t(V,{...w.userNode})},Y=V=>{if(!(Ji(V.nativeEvent)||g)){if(Bi.includes(V.key)&&I){const W=V.key==="Escape";ho({id:e,store:$,unselect:W,nodeRef:b})}else if(k&&p.selected&&Object.prototype.hasOwnProperty.call(pn,V.key)){V.preventDefault();const{ariaLabelConfig:W}=$.getState();$.setState({ariaLiveMessage:W["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),_({direction:pn[V.key],factor:V.shiftKey?4:1})}}},X=()=>{if(g||!b.current?.matches(":focus-visible"))return;const{transform:V,width:W,height:te,autoPanOnNodeFocus:ne,setCenter:Z}=$.getState();if(!ne)return;To(new Map([[e,p]]),{x:0,y:0,width:W,height:te},V,!0).length>0||Z(p.position.x+C.width/2,p.position.y+C.height/2,{zoom:V[2]})};return v.jsx("div",{className:ae(["react-flow__node",`react-flow__node-${A}`,{[h]:k},p.className,{selected:p.selected,selectable:I,parent:E,draggable:k,dragging:N}]),ref:b,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:M?"all":"none",visibility:z?"visible":"hidden",...p.style,...O},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:L,onMouseMove:H,onMouseLeave:j,onContextMenu:q,onClick:G,onDoubleClick:F,onKeyDown:D?Y:void 0,tabIndex:D?0:void 0,onFocus:D?X:void 0,role:p.ariaRole??(D?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${ms}-${m}`,"aria-label":p.ariaLabel,...p.domAttributes,children:v.jsx(Uh,{value:e,children:v.jsx(T,{id:e,data:p.data,type:A,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:p.selected??!1,selectable:I,draggable:k,deletable:p.deletable??!0,isConnectable:B,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:N,dragHandle:p.dragHandle,zIndex:w.z,parentId:p.parentId,...C})})})}const lp=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ts(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=ee(lp,ie),s=rp(e.onlyRenderVisibleElements),a=sp();return v.jsx("div",{className:"react-flow__nodes",style:Tn,children:s.map(l=>v.jsx(cp,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},l))})}Ts.displayName="NodeRenderer";const up=P.memo(Ts);function dp(e){return ee(P.useCallback(n=>{if(!e)return n.edges.map(r=>r.id);const o=[];if(n.width&&n.height)for(const r of n.edges){const i=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);i&&s&&yf({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[e]),ie)}const fp=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),hp=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Fr={[un.Arrow]:fp,[un.ArrowClosed]:hp};function pp(e){const t=re();return P.useMemo(()=>Object.prototype.hasOwnProperty.call(Fr,e)?Fr[e]:(t.getState().onError?.("009",_e.error009(e)),null),[e])}const gp=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=pp(t);return l?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:v.jsx(l,{color:n,strokeWidth:s})}):null},ks=({defaultColor:e,rfId:t})=>{const n=ee(i=>i.edges),o=ee(i=>i.defaultEdgeOptions),r=P.useMemo(()=>Nf(n,{id:t,defaultColor:e,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[n,o,t,e]);return r.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:r.map(i=>v.jsx(gp,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};ks.displayName="MarkerDefinitions";var mp=P.memo(ks);function Rs({x:e,y:t,label:n,labelStyle:o,labelShowBg:r=!0,labelBgStyle:i,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u}){const[f,d]=P.useState({x:1,y:0,width:0,height:0}),h=ae(["react-flow__edge-textwrapper",c]),g=P.useRef(null);return P.useEffect(()=>{if(g.current){const m=g.current.getBBox();d({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...u,children:[r&&v.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),v.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:g,style:o,children:n}),l]}):null}Rs.displayName="EdgeText";const yp=P.memo(Rs);function kn({path:e,labelX:t,labelY:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:c=20,...u}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...u,d:e,fill:"none",className:ae(["react-flow__edge-path",u.className])}),c&&v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}),o&&ye(t)&&ye(n)?v.jsx(yp,{x:t,y:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function Vr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Ms({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top}){const[s,a]=Vr({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=Vr({pos:i,x1:o,y1:r,x2:e,y2:t}),[u,f,d,h]=es({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${a} ${l},${c} ${o},${r}`,u,f,d,h]}function Ps(e){return P.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s,targetPosition:a,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:y,interactionWidth:x})=>{const[S,p,w]=Ms({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:a}),E=e.isInternal?void 0:t;return v.jsx(kn,{id:E,path:S,labelX:p,labelY:w,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:y,interactionWidth:x})})}const xp=Ps({isInternal:!1}),Is=Ps({isInternal:!0});xp.displayName="SimpleBezierEdge";Is.displayName="SimpleBezierEdgeInternal";function Os(e){return P.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,sourcePosition:h=U.Bottom,targetPosition:g=U.Top,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:S})=>{const[p,w,E]=co({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:i,targetPosition:g,borderRadius:x?.borderRadius,offset:x?.offset,stepPosition:x?.stepPosition}),A=e.isInternal?void 0:t;return v.jsx(kn,{id:A,path:p,labelX:w,labelY:E,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:m,markerStart:y,interactionWidth:S})})}const Ds=Os({isInternal:!1}),$s=Os({isInternal:!0});Ds.displayName="SmoothStepEdge";$s.displayName="SmoothStepEdgeInternal";function Ls(e){return P.memo(({id:t,...n})=>{const o=e.isInternal?void 0:t;return v.jsx(Ds,{...n,id:o,pathOptions:P.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const wp=Ls({isInternal:!1}),Hs=Ls({isInternal:!0});wp.displayName="StepEdge";Hs.displayName="StepEdgeInternal";function zs(e){return P.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:m})=>{const[y,x,S]=os({sourceX:n,sourceY:o,targetX:r,targetY:i}),p=e.isInternal?void 0:t;return v.jsx(kn,{id:p,path:y,labelX:x,labelY:S,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:m})})}const bp=zs({isInternal:!1}),Bs=zs({isInternal:!0});bp.displayName="StraightEdge";Bs.displayName="StraightEdgeInternal";function js(e){return P.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=U.Bottom,targetPosition:a=U.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:S})=>{const[p,w,E]=ts({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:a,curvature:x?.curvature}),A=e.isInternal?void 0:t;return v.jsx(kn,{id:A,path:p,labelX:w,labelY:E,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:y,interactionWidth:S})})}const vp=js({isInternal:!1}),Fs=js({isInternal:!0});vp.displayName="BezierEdge";Fs.displayName="BezierEdgeInternal";const Ur={default:Fs,straight:Bs,step:Hs,smoothstep:$s,simplebezier:Is},qr={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ep=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Sp=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Xr="react-flow__edgeupdater";function Yr({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a}){return v.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:ae([Xr,`${Xr}-${a}`]),cx:Ep(t,o,e),cy:Sp(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function _p({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:c,onReconnectStart:u,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const g=re(),m=(w,E)=>{if(w.button!==0)return;const{autoPanOnConnect:A,domNode:T,isValidConnection:k,connectionMode:I,connectionRadius:B,lib:D,onConnectStart:$,onConnectEnd:z,cancelConnection:b,nodeLookup:N,rfId:_,panBy:C,updateConnection:O}=g.getState(),M=E.type==="target",L=(q,F)=>{d(!1),f?.(q,n,E.type,F)},H=q=>c?.(n,q),j=(q,F)=>{d(!0),u?.(w,n,E.type),$?.(q,F)};fo.onPointerDown(w.nativeEvent,{autoPanOnConnect:A,connectionMode:I,connectionRadius:B,domNode:T,handleId:E.id,nodeId:E.nodeId,nodeLookup:N,isTarget:M,edgeUpdaterType:E.type,lib:D,flowId:_,cancelConnection:b,panBy:C,isValidConnection:k,onConnect:H,onConnectStart:j,onConnectEnd:z,onReconnectEnd:L,updateConnection:O,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold})},y=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>h(!0),p=()=>h(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(Yr,{position:a,centerX:o,centerY:r,radius:t,onMouseDown:y,onMouseEnter:S,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&v.jsx(Yr,{position:l,centerX:i,centerY:s,radius:t,onMouseDown:x,onMouseEnter:S,onMouseOut:p,type:"target"})]})}function Np({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:g,edgeTypes:m,noPanClassName:y,onError:x,disableKeyboardA11y:S}){let p=ee(Z=>Z.edgeLookup.get(e));const w=ee(Z=>Z.defaultEdgeOptions);p=w?{...w,...p}:p;let E=p.type||"default",A=m?.[E]||Ur[E];A===void 0&&(x?.("011",_e.error011(E)),E="default",A=m?.default||Ur.default);const T=!!(p.focusable||t&&typeof p.focusable>"u"),k=typeof f<"u"&&(p.reconnectable||n&&typeof p.reconnectable>"u"),I=!!(p.selectable||o&&typeof p.selectable>"u"),B=P.useRef(null),[D,$]=P.useState(!1),[z,b]=P.useState(!1),N=re(),{zIndex:_,sourceX:C,sourceY:O,targetX:M,targetY:L,sourcePosition:H,targetPosition:j}=ee(P.useCallback(Z=>{const Q=Z.nodeLookup.get(p.source),K=Z.nodeLookup.get(p.target);if(!Q||!K)return{zIndex:p.zIndex,...qr};const oe=_f({id:e,sourceNode:Q,targetNode:K,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:Z.connectionMode,onError:x});return{zIndex:mf({selected:p.selected,zIndex:p.zIndex,sourceNode:Q,targetNode:K,elevateOnSelect:Z.elevateEdgesOnSelect}),...oe||qr}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),ie),q=P.useMemo(()=>p.markerStart?`url('#${lo(p.markerStart,g)}')`:void 0,[p.markerStart,g]),F=P.useMemo(()=>p.markerEnd?`url('#${lo(p.markerEnd,g)}')`:void 0,[p.markerEnd,g]);if(p.hidden||C===null||O===null||M===null||L===null)return null;const G=Z=>{const{addSelectedEdges:Q,unselectNodesAndEdges:K,multiSelectionActive:oe}=N.getState();I&&(N.setState({nodesSelectionActive:!1}),p.selected&&oe?(K({nodes:[],edges:[p]}),B.current?.blur()):Q([e])),r&&r(Z,p)},Y=i?Z=>{i(Z,{...p})}:void 0,X=s?Z=>{s(Z,{...p})}:void 0,V=a?Z=>{a(Z,{...p})}:void 0,W=l?Z=>{l(Z,{...p})}:void 0,te=c?Z=>{c(Z,{...p})}:void 0,ne=Z=>{if(!S&&Bi.includes(Z.key)&&I){const{unselectNodesAndEdges:Q,addSelectedEdges:K}=N.getState();Z.key==="Escape"?(B.current?.blur(),Q({edges:[p]})):K([e])}};return v.jsx("svg",{style:{zIndex:_},children:v.jsxs("g",{className:ae(["react-flow__edge",`react-flow__edge-${E}`,p.className,y,{selected:p.selected,animated:p.animated,inactive:!I&&!r,updating:D,selectable:I}]),onClick:G,onDoubleClick:Y,onContextMenu:X,onMouseEnter:V,onMouseMove:W,onMouseLeave:te,onKeyDown:T?ne:void 0,tabIndex:T?0:void 0,role:p.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":T?`${ys}-${g}`:void 0,ref:B,...p.domAttributes,children:[!z&&v.jsx(A,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:I,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:C,sourceY:O,targetX:M,targetY:L,sourcePosition:H,targetPosition:j,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:q,markerEnd:F,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),k&&v.jsx(_p,{edge:p,isReconnectable:k,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:C,sourceY:O,targetX:M,targetY:L,sourcePosition:H,targetPosition:j,setUpdateHover:$,setReconnecting:b})]})})}const Cp=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Vs({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:m}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:S,onError:p}=ee(Cp,ie),w=dp(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(mp,{defaultColor:e,rfId:n}),w.map(E=>v.jsx(Np,{id:E,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:S,noPanClassName:r,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:u,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:p,edgeTypes:o,disableKeyboardA11y:m},E))]})}Vs.displayName="EdgeRenderer";const Ap=P.memo(Vs),Tp=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function kp({children:e}){const t=ee(Tp);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Rp(e){const t=Do(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Mp=e=>e.panZoom?.syncViewport;function Pp(e){const t=ee(Mp),n=re();return P.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Ip(e){return e.connection.inProgress?{...e.connection,to:Pt(e.connection.to,e.transform)}:{...e.connection}}function Op(e){return Ip}function Dp(e){const t=Op();return ee(t,ie)}const $p=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Lp({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:i,height:s,isValid:a,inProgress:l}=ee($p,ie);return!(i&&r&&l)?null:v.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:ae(["react-flow__connection",Vi(a)]),children:v.jsx(Us,{style:t,type:n,CustomComponent:o,isValid:a})})})}const Us=({style:e,type:t=Oe.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:s,fromHandle:a,fromPosition:l,to:c,toNode:u,toHandle:f,toPosition:d}=Dp();if(!r)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:d,connectionStatus:Vi(o),toNode:u,toHandle:f});let h="";const g={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:d};switch(t){case Oe.Bezier:[h]=ts(g);break;case Oe.SimpleBezier:[h]=Ms(g);break;case Oe.Step:[h]=co({...g,borderRadius:0});break;case Oe.SmoothStep:[h]=co(g);break;default:[h]=os(g)}return v.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Us.displayName="ConnectionLine";const Hp={};function Wr(e=Hp){P.useRef(e),re(),P.useEffect(()=>{},[e])}function zp(){re(),P.useRef(!1),P.useEffect(()=>{},[])}function qs({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:m,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:S,selectionOnDrag:p,selectionMode:w,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:T,deleteKeyCode:k,onlyRenderVisibleElements:I,elementsSelectable:B,defaultViewport:D,translateExtent:$,minZoom:z,maxZoom:b,preventScrolling:N,defaultMarkerColor:_,zoomOnScroll:C,zoomOnPinch:O,panOnScroll:M,panOnScrollSpeed:L,panOnScrollMode:H,zoomOnDoubleClick:j,panOnDrag:q,onPaneClick:F,onPaneMouseEnter:G,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneScroll:V,onPaneContextMenu:W,paneClickDistance:te,nodeClickDistance:ne,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:K,onEdgeMouseLeave:oe,reconnectRadius:le,onReconnect:Ce,onReconnectStart:Xe,onReconnectEnd:Dt,noDragClassName:$t,noWheelClassName:Lt,noPanClassName:ct,disableKeyboardA11y:lt,nodeExtent:Ln,rfId:Ht,viewport:Ye,onViewportChange:ut}){return Wr(e),Wr(t),zp(),Rp(n),Pp(Ye),v.jsx(np,{onPaneClick:F,onPaneMouseEnter:G,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneContextMenu:W,onPaneScroll:V,paneClickDistance:te,deleteKeyCode:k,selectionKeyCode:S,selectionOnDrag:p,selectionMode:w,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:T,elementsSelectable:B,zoomOnScroll:C,zoomOnPinch:O,zoomOnDoubleClick:j,panOnScroll:M,panOnScrollSpeed:L,panOnScrollMode:H,panOnDrag:q,defaultViewport:D,translateExtent:$,minZoom:z,maxZoom:b,onSelectionContextMenu:f,preventScrolling:N,noDragClassName:$t,noWheelClassName:Lt,noPanClassName:ct,disableKeyboardA11y:lt,onViewportChange:ut,isControlledViewport:!!Ye,children:v.jsxs(kp,{children:[v.jsx(Ap,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:Ce,onReconnectStart:Xe,onReconnectEnd:Dt,onlyRenderVisibleElements:I,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:K,onEdgeMouseLeave:oe,reconnectRadius:le,defaultMarkerColor:_,noPanClassName:ct,disableKeyboardA11y:lt,rfId:Ht}),v.jsx(Lp,{style:m,type:g,component:y,containerStyle:x}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(up,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:ne,onlyRenderVisibleElements:I,noPanClassName:ct,noDragClassName:$t,disableKeyboardA11y:lt,nodeExtent:Ln,rfId:Ht}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}qs.displayName="GraphView";const Bp=P.memo(qs),Zr=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:f}={})=>{const d=new Map,h=new Map,g=new Map,m=new Map,y=o??t??[],x=n??e??[],S=u??[0,0],p=f??Et;is(g,m,y);const w=uo(x,d,h,{nodeOrigin:S,nodeExtent:p,elevateNodesOnSelect:!1});let E=[0,0,1];if(s&&r&&i){const A=Mt(d,{filter:B=>!!((B.width||B.initialWidth)&&(B.height||B.initialHeight))}),{x:T,y:k,zoom:I}=ko(A,r,i,l,c,a?.padding??.1);E=[T,k,I]}return{rfId:"1",width:0,height:0,transform:E,nodes:x,nodesInitialized:w,nodeLookup:d,parentLookup:h,edges:y,edgeLookup:m,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Et,nodeExtent:p,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:tt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{...Fi},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:uf,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ji}},jp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:f})=>ah((d,h)=>{async function g(){const{nodeLookup:m,panZoom:y,fitViewOptions:x,fitViewResolver:S,width:p,height:w,minZoom:E,maxZoom:A}=h();y&&(await cf({nodes:m,width:p,height:w,panZoom:y,minZoom:E,maxZoom:A},x),S?.resolve(!0),d({fitViewResolver:null}))}return{...Zr({nodes:e,edges:t,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:f,defaultNodes:n,defaultEdges:o}),setNodes:m=>{const{nodeLookup:y,parentLookup:x,nodeOrigin:S,elevateNodesOnSelect:p,fitViewQueued:w}=h(),E=uo(m,y,x,{nodeOrigin:S,nodeExtent:f,elevateNodesOnSelect:p,checkEquality:!0});w&&E?(g(),d({nodes:m,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:m,nodesInitialized:E})},setEdges:m=>{const{connectionLookup:y,edgeLookup:x}=h();is(y,x,m),d({edges:m})},setDefaultNodesAndEdges:(m,y)=>{if(m){const{setNodes:x}=h();x(m),d({hasDefaultNodes:!0})}if(y){const{setEdges:x}=h();x(y),d({hasDefaultEdges:!0})}},updateNodeInternals:m=>{const{triggerNodeChanges:y,nodeLookup:x,parentLookup:S,domNode:p,nodeOrigin:w,nodeExtent:E,debug:A,fitViewQueued:T}=h(),{changes:k,updatedInternals:I}=Rf(m,x,S,p,w,E);I&&(Af(x,S,{nodeOrigin:w,nodeExtent:E}),T?(g(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),k?.length>0&&(A&&console.log("React Flow: trigger node changes",k),y?.(k)))},updateNodePositions:(m,y=!1)=>{const x=[],S=[],{nodeLookup:p,triggerNodeChanges:w}=h();for(const[E,A]of m){const T=p.get(E),k=!!(T?.expandParent&&T?.parentId&&A?.position),I={id:E,type:"position",position:k?{x:Math.max(0,A.position.x),y:Math.max(0,A.position.y)}:A.position,dragging:y};k&&T.parentId&&x.push({id:E,parentId:T.parentId,rect:{...A.internals.positionAbsolute,width:A.measured.width??0,height:A.measured.height??0}}),S.push(I)}if(x.length>0){const{parentLookup:E,nodeOrigin:A}=h(),T=Oo(x,p,E,A);S.push(...T)}w(S)},triggerNodeChanges:m=>{const{onNodesChange:y,setNodes:x,nodes:S,hasDefaultNodes:p,debug:w}=h();if(m?.length){if(p){const E=bs(m,S);x(E)}w&&console.log("React Flow: trigger node changes",m),y?.(m)}},triggerEdgeChanges:m=>{const{onEdgesChange:y,setEdges:x,edges:S,hasDefaultEdges:p,debug:w}=h();if(m?.length){if(p){const E=vs(m,S);x(E)}w&&console.log("React Flow: trigger edge changes",m),y?.(m)}},addSelectedNodes:m=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:S,triggerNodeChanges:p,triggerEdgeChanges:w}=h();if(y){const E=m.map(A=>$e(A,!0));p(E);return}p(Ge(S,new Set([...m]),!0)),w(Ge(x))},addSelectedEdges:m=>{const{multiSelectionActive:y,edgeLookup:x,nodeLookup:S,triggerNodeChanges:p,triggerEdgeChanges:w}=h();if(y){const E=m.map(A=>$e(A,!0));w(E);return}w(Ge(x,new Set([...m]))),p(Ge(S,new Set,!0))},unselectNodesAndEdges:({nodes:m,edges:y}={})=>{const{edges:x,nodes:S,nodeLookup:p,triggerNodeChanges:w,triggerEdgeChanges:E}=h(),A=m||S,T=y||x,k=A.map(B=>{const D=p.get(B.id);return D&&(D.selected=!1),$e(B.id,!1)}),I=T.map(B=>$e(B.id,!1));w(k),E(I)},setMinZoom:m=>{const{panZoom:y,maxZoom:x}=h();y?.setScaleExtent([m,x]),d({minZoom:m})},setMaxZoom:m=>{const{panZoom:y,minZoom:x}=h();y?.setScaleExtent([x,m]),d({maxZoom:m})},setTranslateExtent:m=>{h().panZoom?.setTranslateExtent(m),d({translateExtent:m})},setPaneClickDistance:m=>{h().panZoom?.setClickDistance(m)},resetSelectedElements:()=>{const{edges:m,nodes:y,triggerNodeChanges:x,triggerEdgeChanges:S,elementsSelectable:p}=h();if(!p)return;const w=y.reduce((A,T)=>T.selected?[...A,$e(T.id,!1)]:A,[]),E=m.reduce((A,T)=>T.selected?[...A,$e(T.id,!1)]:A,[]);x(w),S(E)},setNodeExtent:m=>{const{nodes:y,nodeLookup:x,parentLookup:S,nodeOrigin:p,elevateNodesOnSelect:w,nodeExtent:E}=h();m[0][0]===E[0][0]&&m[0][1]===E[0][1]&&m[1][0]===E[1][0]&&m[1][1]===E[1][1]||(uo(y,x,S,{nodeOrigin:p,nodeExtent:m,elevateNodesOnSelect:w,checkEquality:!1}),d({nodeExtent:m}))},panBy:m=>{const{transform:y,width:x,height:S,panZoom:p,translateExtent:w}=h();return Mf({delta:m,panZoom:p,transform:y,translateExtent:w,width:x,height:S})},setCenter:async(m,y,x)=>{const{width:S,height:p,maxZoom:w,panZoom:E}=h();if(!E)return Promise.resolve(!1);const A=typeof x?.zoom<"u"?x.zoom:w;return await E.setViewport({x:S/2-m*A,y:p/2-y*A,zoom:A},{duration:x?.duration,ease:x?.ease,interpolate:x?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{d({connection:{...Fi}})},updateConnection:m=>{d({connection:m})},reset:()=>d({...Zr()})}},Object.is);function Fp({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:c,nodeOrigin:u,nodeExtent:f,children:d}){const[h]=P.useState(()=>jp({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:c,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:u,nodeExtent:f}));return v.jsx(ch,{value:h,children:v.jsx(Mh,{children:d})})}function Vp({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:s,fitView:a,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:f,nodeExtent:d}){return P.useContext(Cn)?v.jsx(v.Fragment,{children:e}):v.jsx(Fp,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:u,nodeOrigin:f,nodeExtent:d,children:e})}const Up={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qp({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:S,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:A,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:I,onNodesDelete:B,onEdgesDelete:D,onDelete:$,onSelectionChange:z,onSelectionDragStart:b,onSelectionDrag:N,onSelectionDragStop:_,onSelectionContextMenu:C,onSelectionStart:O,onSelectionEnd:M,onBeforeDelete:L,connectionMode:H,connectionLineType:j=Oe.Bezier,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:G,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:V=!1,selectionMode:W=St.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:ne=hn()?"Meta":"Control",zoomActivationKeyCode:Z=hn()?"Meta":"Control",snapToGrid:Q,snapGrid:K,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:le,nodesDraggable:Ce,autoPanOnNodeFocus:Xe,nodesConnectable:Dt,nodesFocusable:$t,nodeOrigin:Lt=xs,edgesFocusable:ct,edgesReconnectable:lt,elementsSelectable:Ln=!0,defaultViewport:Ht=vh,minZoom:Ye=.5,maxZoom:ut=2,translateExtent:Bo=Et,preventScrolling:ba=!0,nodeExtent:Hn,defaultMarkerColor:va="#b1b1b7",zoomOnScroll:Ea=!0,zoomOnPinch:Sa=!0,panOnScroll:_a=!1,panOnScrollSpeed:Na=.5,panOnScrollMode:Ca=Be.Free,zoomOnDoubleClick:Aa=!0,panOnDrag:Ta=!0,onPaneClick:ka,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:Pa,onPaneScroll:Ia,onPaneContextMenu:Oa,paneClickDistance:jo=0,nodeClickDistance:Da=0,children:$a,onReconnect:La,onReconnectStart:Ha,onReconnectEnd:za,onEdgeContextMenu:Ba,onEdgeDoubleClick:ja,onEdgeMouseEnter:Fa,onEdgeMouseMove:Va,onEdgeMouseLeave:Ua,reconnectRadius:qa=10,onNodesChange:Xa,onEdgesChange:Ya,noDragClassName:Wa="nodrag",noWheelClassName:Za="nowheel",noPanClassName:Fo="nopan",fitView:Vo,fitViewOptions:Uo,connectOnClick:Ga,attributionPosition:Ka,proOptions:Ja,defaultEdgeOptions:Qa,elevateNodesOnSelect:ec,elevateEdgesOnSelect:tc,disableKeyboardA11y:qo=!1,autoPanOnConnect:nc,autoPanOnNodeDrag:oc,autoPanSpeed:rc,connectionRadius:ic,isValidConnection:sc,onError:ac,style:cc,id:Xo,nodeDragThreshold:lc,connectionDragThreshold:uc,viewport:dc,onViewportChange:fc,width:hc,height:pc,colorMode:gc="light",debug:mc,onScroll:Yo,ariaLabelConfig:yc,...xc},wc){const zn=Xo||"1",bc=Nh(gc),vc=P.useCallback(Wo=>{Wo.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Yo?.(Wo)},[Yo]);return v.jsx("div",{"data-testid":"rf__wrapper",...xc,onScroll:vc,style:{...cc,...Up},ref:wc,className:ae(["react-flow",r,bc]),id:Xo,role:"application",children:v.jsxs(Vp,{nodes:e,edges:t,width:hc,height:pc,fitView:Vo,fitViewOptions:Uo,minZoom:Ye,maxZoom:ut,nodeOrigin:Lt,nodeExtent:Hn,children:[v.jsx(Bp,{onInit:c,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:S,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:A,nodeTypes:i,edgeTypes:s,connectionLineType:j,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:G,selectionKeyCode:X,selectionOnDrag:V,selectionMode:W,deleteKeyCode:Y,multiSelectionKeyCode:ne,panActivationKeyCode:te,zoomActivationKeyCode:Z,onlyRenderVisibleElements:oe,defaultViewport:Ht,translateExtent:Bo,minZoom:Ye,maxZoom:ut,preventScrolling:ba,zoomOnScroll:Ea,zoomOnPinch:Sa,zoomOnDoubleClick:Aa,panOnScroll:_a,panOnScrollSpeed:Na,panOnScrollMode:Ca,panOnDrag:Ta,onPaneClick:ka,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:Pa,onPaneScroll:Ia,onPaneContextMenu:Oa,paneClickDistance:jo,nodeClickDistance:Da,onSelectionContextMenu:C,onSelectionStart:O,onSelectionEnd:M,onReconnect:La,onReconnectStart:Ha,onReconnectEnd:za,onEdgeContextMenu:Ba,onEdgeDoubleClick:ja,onEdgeMouseEnter:Fa,onEdgeMouseMove:Va,onEdgeMouseLeave:Ua,reconnectRadius:qa,defaultMarkerColor:va,noDragClassName:Wa,noWheelClassName:Za,noPanClassName:Fo,rfId:zn,disableKeyboardA11y:qo,nodeExtent:Hn,viewport:dc,onViewportChange:fc}),v.jsx(_h,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:Ce,autoPanOnNodeFocus:Xe,nodesConnectable:Dt,nodesFocusable:$t,edgesFocusable:ct,edgesReconnectable:lt,elementsSelectable:Ln,elevateNodesOnSelect:ec,elevateEdgesOnSelect:tc,minZoom:Ye,maxZoom:ut,nodeExtent:Hn,onNodesChange:Xa,onEdgesChange:Ya,snapToGrid:Q,snapGrid:K,connectionMode:H,translateExtent:Bo,connectOnClick:Ga,defaultEdgeOptions:Qa,fitView:Vo,fitViewOptions:Uo,onNodesDelete:B,onEdgesDelete:D,onDelete:$,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:I,onSelectionDrag:N,onSelectionDragStart:b,onSelectionDragStop:_,onMove:u,onMoveStart:f,onMoveEnd:d,noPanClassName:Fo,nodeOrigin:Lt,rfId:zn,autoPanOnConnect:nc,autoPanOnNodeDrag:oc,autoPanSpeed:rc,onError:ac,connectionRadius:ic,isValidConnection:sc,selectNodesOnDrag:le,nodeDragThreshold:lc,connectionDragThreshold:uc,onBeforeDelete:L,paneClickDistance:jo,debug:mc,ariaLabelConfig:yc}),v.jsx(bh,{onSelectionChange:z}),$a,v.jsx(gh,{proOptions:Ja,position:Ka}),v.jsx(ph,{rfId:zn,disableKeyboardA11y:qo})]})})}var Xp=Es(qp);function Yp(e){const[t,n]=P.useState(e),o=P.useCallback(r=>n(i=>bs(r,i)),[]);return[t,n,o]}function Wp(e){const[t,n]=P.useState(e),o=P.useCallback(r=>n(i=>vs(r,i)),[]);return[t,n,o]}function Zp({dimensions:e,lineWidth:t,variant:n,className:o}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ae(["react-flow__background-pattern",n,o])})}function Gp({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:ae(["react-flow__background-pattern","dots",t])})}var ke;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ke||(ke={}));const Kp={[ke.Dots]:1,[ke.Lines]:1,[ke.Cross]:6},Jp=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Xs({id:e,variant:t=ke.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:s,bgColor:a,style:l,className:c,patternClassName:u}){const f=P.useRef(null),{transform:d,patternId:h}=ee(Jp,ie),g=o||Kp[t],m=t===ke.Dots,y=t===ke.Cross,x=Array.isArray(n)?n:[n,n],S=[x[0]*d[2]||1,x[1]*d[2]||1],p=g*d[2],w=Array.isArray(i)?i:[i,i],E=y?[p,p]:S,A=[w[0]*d[2]||1+E[0]/2,w[1]*d[2]||1+E[1]/2],T=`${h}${e||""}`;return v.jsxs("svg",{className:ae(["react-flow__background",c]),style:{...l,...Tn,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[v.jsx("pattern",{id:T,x:d[0]%S[0],y:d[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:m?v.jsx(Gp,{radius:p/2,className:u}):v.jsx(Zp,{dimensions:E,lineWidth:r,variant:t,className:u})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}Xs.displayName="Background";const Qp=P.memo(Xs);function eg(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tg(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ng(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function og(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function rg(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Yt({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:ae(["react-flow__controls-button",t]),...n,children:e})}const ig=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Ys({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:c,children:u,position:f="bottom-left",orientation:d="vertical","aria-label":h}){const g=re(),{isInteractive:m,minZoomReached:y,maxZoomReached:x,ariaLabelConfig:S}=ee(ig,ie),{zoomIn:p,zoomOut:w,fitView:E}=Do(),A=()=>{p(),i?.()},T=()=>{w(),s?.()},k=()=>{E(r),a?.()},I=()=>{g.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)},B=d==="horizontal"?"horizontal":"vertical";return v.jsxs(An,{className:ae(["react-flow__controls",B,c]),position:f,style:e,"data-testid":"rf__controls","aria-label":h??S["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(Yt,{onClick:A,className:"react-flow__controls-zoomin",title:S["controls.zoomIn.ariaLabel"],"aria-label":S["controls.zoomIn.ariaLabel"],disabled:x,children:v.jsx(eg,{})}),v.jsx(Yt,{onClick:T,className:"react-flow__controls-zoomout",title:S["controls.zoomOut.ariaLabel"],"aria-label":S["controls.zoomOut.ariaLabel"],disabled:y,children:v.jsx(tg,{})})]}),n&&v.jsx(Yt,{className:"react-flow__controls-fitview",onClick:k,title:S["controls.fitView.ariaLabel"],"aria-label":S["controls.fitView.ariaLabel"],children:v.jsx(ng,{})}),o&&v.jsx(Yt,{className:"react-flow__controls-interactive",onClick:I,title:S["controls.interactive.ariaLabel"],"aria-label":S["controls.interactive.ariaLabel"],children:m?v.jsx(rg,{}):v.jsx(og,{})}),u]})}Ys.displayName="Controls";const sg=P.memo(Ys);function ag({id:e,x:t,y:n,width:o,height:r,style:i,color:s,strokeColor:a,strokeWidth:l,className:c,borderRadius:u,shapeRendering:f,selected:d,onClick:h}){const{background:g,backgroundColor:m}=i||{},y=s||g||m;return v.jsx("rect",{className:ae(["react-flow__minimap-node",{selected:d},c]),x:t,y:n,rx:u,ry:u,width:o,height:r,style:{fill:y,stroke:a,strokeWidth:l},shapeRendering:f,onClick:h?x=>h(x,e):void 0})}const cg=P.memo(ag),lg=e=>e.nodes.map(t=>t.id),Wn=e=>e instanceof Function?e:()=>e;function ug({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=cg,onClick:s}){const a=ee(lg,ie),l=Wn(t),c=Wn(e),u=Wn(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:a.map(d=>v.jsx(fg,{id:d,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:s,shapeRendering:f},d))})}function dg({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:l}){const{node:c,x:u,y:f,width:d,height:h}=ee(g=>{const{internals:m}=g.nodeLookup.get(e),y=m.userNode,{x,y:S}=m.positionAbsolute,{width:p,height:w}=Me(y);return{node:y,x,y:S,width:p,height:w}},ie);return!c||c.hidden||!Zi(c)?null:v.jsx(a,{x:u,y:f,width:d,height:h,style:c.style,selected:!!c.selected,className:o(c),color:t(c),borderRadius:r,strokeColor:n(c),strokeWidth:i,shapeRendering:s,onClick:l,id:c.id})}const fg=P.memo(dg);var hg=P.memo(ug);const pg=200,gg=150,mg=e=>!e.hidden,yg=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Wi(Mt(e.nodeLookup,{filter:mg}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},xg="react-flow__minimap-desc";function Ws({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:c,maskStrokeColor:u,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:g,pannable:m=!1,zoomable:y=!1,ariaLabel:x,inversePan:S,zoomStep:p=10,offsetScale:w=5}){const E=re(),A=P.useRef(null),{boundingRect:T,viewBB:k,rfId:I,panZoom:B,translateExtent:D,flowWidth:$,flowHeight:z,ariaLabelConfig:b}=ee(yg,ie),N=e?.width??pg,_=e?.height??gg,C=T.width/N,O=T.height/_,M=Math.max(C,O),L=M*N,H=M*_,j=w*M,q=T.x-(L-T.width)/2-j,F=T.y-(H-T.height)/2-j,G=L+j*2,Y=H+j*2,X=`${xg}-${I}`,V=P.useRef(0),W=P.useRef();V.current=M,P.useEffect(()=>{if(A.current&&B)return W.current=zf({domNode:A.current,panZoom:B,getTransform:()=>E.getState().transform,getViewScale:()=>V.current}),()=>{W.current?.destroy()}},[B]),P.useEffect(()=>{W.current?.update({translateExtent:D,width:$,height:z,inversePan:S,pannable:m,zoomStep:p,zoomable:y})},[m,y,S,p,D,$,z]);const te=h?Q=>{const[K,oe]=W.current?.pointer(Q)||[0,0];h(Q,{x:K,y:oe})}:void 0,ne=g?P.useCallback((Q,K)=>{const oe=E.getState().nodeLookup.get(K).internals.userNode;g(Q,oe)},[]):void 0,Z=x??b["minimap.ariaLabel"];return v.jsx(An,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*M:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ae(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:N,height:_,viewBox:`${q} ${F} ${G} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":X,ref:A,onClick:te,children:[Z&&v.jsx("title",{id:X,children:Z}),v.jsx(hg,{onClick:ne,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:a}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${q-j},${F-j}h${G+j*2}v${Y+j*2}h${-G-j*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ws.displayName="MiniMap";P.memo(Ws);const wg=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,bg={[it.Line]:"right",[it.Handle]:"bottom-right"};function vg({nodeId:e,position:t,variant:n=it.Handle,className:o,style:r=void 0,children:i,color:s,minWidth:a=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,autoScale:h=!0,shouldResize:g,onResizeStart:m,onResize:y,onResizeEnd:x}){const S=Cs(),p=typeof e=="string"?e:S,w=re(),E=P.useRef(null),A=n===it.Handle,T=ee(P.useCallback(wg(A&&h),[A,h]),ie),k=P.useRef(null),I=t??bg[n];P.useEffect(()=>{if(!(!E.current||!p))return k.current||(k.current=th({domNode:E.current,nodeId:p,getStoreItems:()=>{const{nodeLookup:D,transform:$,snapGrid:z,snapToGrid:b,nodeOrigin:N,domNode:_}=w.getState();return{nodeLookup:D,transform:$,snapGrid:z,snapToGrid:b,nodeOrigin:N,paneDomNode:_}},onChange:(D,$)=>{const{triggerNodeChanges:z,nodeLookup:b,parentLookup:N,nodeOrigin:_}=w.getState(),C=[],O={x:D.x,y:D.y},M=b.get(p);if(M&&M.expandParent&&M.parentId){const L=M.origin??_,H=D.width??M.measured.width??0,j=D.height??M.measured.height??0,q={id:M.id,parentId:M.parentId,rect:{width:H,height:j,...Gi({x:D.x??M.position.x,y:D.y??M.position.y},{width:H,height:j},M.parentId,b,L)}},F=Oo([q],b,N,_);C.push(...F),O.x=D.x?Math.max(L[0]*H,D.x):void 0,O.y=D.y?Math.max(L[1]*j,D.y):void 0}if(O.x!==void 0&&O.y!==void 0){const L={id:p,type:"position",position:{...O}};C.push(L)}if(D.width!==void 0&&D.height!==void 0){const H={id:p,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:D.width,height:D.height}};C.push(H)}for(const L of $){const H={...L,type:"position"};C.push(H)}z(C)},onEnd:({width:D,height:$})=>{const z={id:p,type:"dimensions",resizing:!1,dimensions:{width:D,height:$}};w.getState().triggerNodeChanges([z])}})),k.current.update({controlPosition:I,boundaries:{minWidth:a,minHeight:l,maxWidth:c,maxHeight:u},keepAspectRatio:f,resizeDirection:d,onResizeStart:m,onResize:y,onResizeEnd:x,shouldResize:g}),()=>{k.current?.destroy()}},[I,a,l,c,u,f,m,y,x,g]);const B=I.split("-");return v.jsx("div",{className:ae(["react-flow__resize-control","nodrag",...B,n,o]),ref:E,style:{...r,scale:T,...s&&{[A?"backgroundColor":"borderColor"]:s}},children:i})}P.memo(vg);function Zs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Eg}=Object.prototype,{getPrototypeOf:Lo}=Object,{iterator:Rn,toStringTag:Gs}=Symbol,Mn=(e=>t=>{const n=Eg.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),we=e=>(e=e.toLowerCase(),t=>Mn(t)===e),Pn=e=>t=>typeof t===e,{isArray:st}=Array,At=Pn("undefined");function Sg(e){return e!==null&&!At(e)&&e.constructor!==null&&!At(e.constructor)&&de(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ks=we("ArrayBuffer");function _g(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ks(e.buffer),t}const Ng=Pn("string"),de=Pn("function"),Js=Pn("number"),In=e=>e!==null&&typeof e=="object",Cg=e=>e===!0||e===!1,Qt=e=>{if(Mn(e)!=="object")return!1;const t=Lo(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Gs in e)&&!(Rn in e)},Ag=we("Date"),Tg=we("File"),kg=we("Blob"),Rg=we("FileList"),Mg=e=>In(e)&&de(e.pipe),Pg=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||de(e.append)&&((t=Mn(e))==="formdata"||t==="object"&&de(e.toString)&&e.toString()==="[object FormData]"))},Ig=we("URLSearchParams"),[Og,Dg,$g,Lg]=["ReadableStream","Request","Response","Headers"].map(we),Hg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function It(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,r;if(typeof e!="object"&&(e=[e]),st(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(o=0;o<s;o++)a=i[o],t.call(null,e[a],a,e)}}function Qs(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,r;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const He=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ea=e=>!At(e)&&e!==He;function po(){const{caseless:e}=ea(this)&&this||{},t={},n=(o,r)=>{const i=e&&Qs(t,r)||r;Qt(t[i])&&Qt(o)?t[i]=po(t[i],o):Qt(o)?t[i]=po({},o):st(o)?t[i]=o.slice():t[i]=o};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&It(arguments[o],n);return t}const zg=(e,t,n,{allOwnKeys:o}={})=>(It(t,(r,i)=>{n&&de(r)?e[i]=Zs(r,n):e[i]=r},{allOwnKeys:o}),e),Bg=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jg=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Fg=(e,t,n,o)=>{let r,i,s;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)s=r[i],(!o||o(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&Lo(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Vg=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},Ug=e=>{if(!e)return null;if(st(e))return e;let t=e.length;if(!Js(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},qg=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Lo(Uint8Array)),Xg=(e,t)=>{const o=(e&&e[Rn]).call(e);let r;for(;(r=o.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Yg=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},Wg=we("HTMLFormElement"),Zg=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,r){return o.toUpperCase()+r}),Gr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Gg=we("RegExp"),ta=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};It(n,(r,i)=>{let s;(s=t(r,i,e))!==!1&&(o[i]=s||r)}),Object.defineProperties(e,o)},Kg=e=>{ta(e,(t,n)=>{if(de(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(de(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Jg=(e,t)=>{const n={},o=r=>{r.forEach(i=>{n[i]=!0})};return st(e)?o(e):o(String(e).split(t)),n},Qg=()=>{},em=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function tm(e){return!!(e&&de(e.append)&&e[Gs]==="FormData"&&e[Rn])}const nm=e=>{const t=new Array(10),n=(o,r)=>{if(In(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[r]=o;const i=st(o)?[]:{};return It(o,(s,a)=>{const l=n(s,r+1);!At(l)&&(i[a]=l)}),t[r]=void 0,i}}return o};return n(e,0)},om=we("AsyncFunction"),rm=e=>e&&(In(e)||de(e))&&de(e.then)&&de(e.catch),na=((e,t)=>e?setImmediate:t?((n,o)=>(He.addEventListener("message",({source:r,data:i})=>{r===He&&i===n&&o.length&&o.shift()()},!1),r=>{o.push(r),He.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",de(He.postMessage)),im=typeof queueMicrotask<"u"?queueMicrotask.bind(He):typeof process<"u"&&process.nextTick||na,sm=e=>e!=null&&de(e[Rn]),R={isArray:st,isArrayBuffer:Ks,isBuffer:Sg,isFormData:Pg,isArrayBufferView:_g,isString:Ng,isNumber:Js,isBoolean:Cg,isObject:In,isPlainObject:Qt,isReadableStream:Og,isRequest:Dg,isResponse:$g,isHeaders:Lg,isUndefined:At,isDate:Ag,isFile:Tg,isBlob:kg,isRegExp:Gg,isFunction:de,isStream:Mg,isURLSearchParams:Ig,isTypedArray:qg,isFileList:Rg,forEach:It,merge:po,extend:zg,trim:Hg,stripBOM:Bg,inherits:jg,toFlatObject:Fg,kindOf:Mn,kindOfTest:we,endsWith:Vg,toArray:Ug,forEachEntry:Xg,matchAll:Yg,isHTMLForm:Wg,hasOwnProperty:Gr,hasOwnProp:Gr,reduceDescriptors:ta,freezeMethods:Kg,toObjectSet:Jg,toCamelCase:Zg,noop:Qg,toFiniteNumber:em,findKey:Qs,global:He,isContextDefined:ea,isSpecCompliantForm:tm,toJSONObject:nm,isAsyncFn:om,isThenable:rm,setImmediate:na,asap:im,isIterable:sm};function J(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r,this.status=r.status?r.status:null)}R.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const oa=J.prototype,ra={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ra[e]={value:e}});Object.defineProperties(J,ra);Object.defineProperty(oa,"isAxiosError",{value:!0});J.from=(e,t,n,o,r,i)=>{const s=Object.create(oa);return R.toFlatObject(e,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),J.call(s,e.message,t,n,o,r),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const am=null;function go(e){return R.isPlainObject(e)||R.isArray(e)}function ia(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function Kr(e,t,n){return e?e.concat(t).map(function(r,i){return r=ia(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function cm(e){return R.isArray(e)&&!e.some(go)}const lm=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function On(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!R.isUndefined(y[m])});const o=n.metaTokens,r=n.visitor||u,i=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(R.isDate(g))return g.toISOString();if(R.isBoolean(g))return g.toString();if(!l&&R.isBlob(g))throw new J("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(g)||R.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,y){let x=g;if(g&&!y&&typeof g=="object"){if(R.endsWith(m,"{}"))m=o?m:m.slice(0,-2),g=JSON.stringify(g);else if(R.isArray(g)&&cm(g)||(R.isFileList(g)||R.endsWith(m,"[]"))&&(x=R.toArray(g)))return m=ia(m),x.forEach(function(p,w){!(R.isUndefined(p)||p===null)&&t.append(s===!0?Kr([m],w,i):s===null?m:m+"[]",c(p))}),!1}return go(g)?!0:(t.append(Kr(y,m,i),c(g)),!1)}const f=[],d=Object.assign(lm,{defaultVisitor:u,convertValue:c,isVisitable:go});function h(g,m){if(!R.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),R.forEach(g,function(x,S){(!(R.isUndefined(x)||x===null)&&r.call(t,x,R.isString(S)?S.trim():S,m,d))===!0&&h(x,m?m.concat(S):[S])}),f.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Jr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Ho(e,t){this._pairs=[],e&&On(e,this,t)}const sa=Ho.prototype;sa.append=function(t,n){this._pairs.push([t,n])};sa.toString=function(t){const n=t?function(o){return t.call(this,o,Jr)}:Jr;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function um(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aa(e,t,n){if(!t)return e;const o=n&&n.encode||um;R.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=R.isURLSearchParams(t)?t.toString():new Ho(t,n).toString(o),i){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Qr{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(o){o!==null&&t(o)})}}const ca={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dm=typeof URLSearchParams<"u"?URLSearchParams:Ho,fm=typeof FormData<"u"?FormData:null,hm=typeof Blob<"u"?Blob:null,pm={isBrowser:!0,classes:{URLSearchParams:dm,FormData:fm,Blob:hm},protocols:["http","https","file","blob","url","data"]},zo=typeof window<"u"&&typeof document<"u",mo=typeof navigator=="object"&&navigator||void 0,gm=zo&&(!mo||["ReactNative","NativeScript","NS"].indexOf(mo.product)<0),mm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ym=zo&&window.location.href||"http://localhost",xm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zo,hasStandardBrowserEnv:gm,hasStandardBrowserWebWorkerEnv:mm,navigator:mo,origin:ym},Symbol.toStringTag,{value:"Module"})),ce={...xm,...pm};function wm(e,t){return On(e,new ce.classes.URLSearchParams,Object.assign({visitor:function(n,o,r,i){return ce.isNode&&R.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function bm(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function vm(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}function la(e){function t(n,o,r,i){let s=n[i++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=i>=n.length;return s=!s&&R.isArray(r)?r.length:s,l?(R.hasOwnProp(r,s)?r[s]=[r[s],o]:r[s]=o,!a):((!r[s]||!R.isObject(r[s]))&&(r[s]=[]),t(n,o,r[s],i)&&R.isArray(r[s])&&(r[s]=vm(r[s])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(o,r)=>{t(bm(o),r,n,0)}),n}return null}function Em(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Ot={transitional:ca,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",r=o.indexOf("application/json")>-1,i=R.isObject(t);if(i&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return r?JSON.stringify(la(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return wm(t,this.formSerializer).toString();if((a=R.isFileList(t))||o.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return On(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),Em(t)):t}],transformResponse:[function(t){const n=this.transitional||Ot.transitional,o=n&&n.forcedJSONParsing,r=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(o&&!this.responseType||r)){const s=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?J.from(a,J.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ce.classes.FormData,Blob:ce.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Ot.headers[e]={}});const Sm=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_m=e=>{const t={};let n,o,r;return e&&e.split(`
`).forEach(function(s){r=s.indexOf(":"),n=s.substring(0,r).trim().toLowerCase(),o=s.substring(r+1).trim(),!(!n||t[n]&&Sm[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},ei=Symbol("internals");function ht(e){return e&&String(e).trim().toLowerCase()}function en(e){return e===!1||e==null?e:R.isArray(e)?e.map(en):String(e)}function Nm(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const Cm=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zn(e,t,n,o,r){if(R.isFunction(o))return o.call(this,t,n);if(r&&(t=n),!!R.isString(t)){if(R.isString(o))return t.indexOf(o)!==-1;if(R.isRegExp(o))return o.test(t)}}function Am(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function Tm(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(r,i,s){return this[o].call(this,t,r,i,s)},configurable:!0})})}let fe=class{constructor(t){t&&this.set(t)}set(t,n,o){const r=this;function i(a,l,c){const u=ht(l);if(!u)throw new Error("header name must be a non-empty string");const f=R.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=en(a))}const s=(a,l)=>R.forEach(a,(c,u)=>i(c,u,l));if(R.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(R.isString(t)&&(t=t.trim())&&!Cm(t))s(_m(t),n);else if(R.isObject(t)&&R.isIterable(t)){let a={},l,c;for(const u of t){if(!R.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?R.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}s(a,n)}else t!=null&&i(n,t,o);return this}get(t,n){if(t=ht(t),t){const o=R.findKey(this,t);if(o){const r=this[o];if(!n)return r;if(n===!0)return Nm(r);if(R.isFunction(n))return n.call(this,r,o);if(R.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ht(t),t){const o=R.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Zn(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let r=!1;function i(s){if(s=ht(s),s){const a=R.findKey(o,s);a&&(!n||Zn(o,o[a],a,n))&&(delete o[a],r=!0)}}return R.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let o=n.length,r=!1;for(;o--;){const i=n[o];(!t||Zn(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,o={};return R.forEach(this,(r,i)=>{const s=R.findKey(o,i);if(s){n[s]=en(r),delete n[i];return}const a=t?Am(i):String(i).trim();a!==i&&delete n[i],n[a]=en(r),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(o,r)=>{o!=null&&o!==!1&&(n[r]=t&&R.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(r=>o.set(r)),o}static accessor(t){const o=(this[ei]=this[ei]={accessors:{}}).accessors,r=this.prototype;function i(s){const a=ht(s);o[a]||(Tm(r,s),o[a]=!0)}return R.isArray(t)?t.forEach(i):i(t),this}};fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(fe.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});R.freezeMethods(fe);function Gn(e,t){const n=this||Ot,o=t||n,r=fe.from(o.headers);let i=o.data;return R.forEach(e,function(a){i=a.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function ua(e){return!!(e&&e.__CANCEL__)}function at(e,t,n){J.call(this,e??"canceled",J.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(at,J,{__CANCEL__:!0});function da(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function km(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rm(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r=0,i=0,s;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=o[i];s||(s=c),n[r]=l,o[r]=c;let f=i,d=0;for(;f!==r;)d+=n[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),c-s<t)return;const h=u&&c-u;return h?Math.round(d*1e3/h):void 0}}function Mm(e,t){let n=0,o=1e3/t,r,i;const s=(c,u=Date.now())=>{n=u,r=null,i&&(clearTimeout(i),i=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=o?s(c,u):(r=c,i||(i=setTimeout(()=>{i=null,s(r)},o-f)))},()=>r&&s(r)]}const gn=(e,t,n=3)=>{let o=0;const r=Rm(50,250);return Mm(i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,l=s-o,c=r(l),u=s<=a;o=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},ti=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},ni=e=>(...t)=>R.asap(()=>e(...t)),Pm=ce.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ce.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ce.origin),ce.navigator&&/(msie|trident)/i.test(ce.navigator.userAgent)):()=>!0,Im=ce.hasStandardBrowserEnv?{write(e,t,n,o,r,i){const s=[e+"="+encodeURIComponent(t)];R.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),R.isString(o)&&s.push("path="+o),R.isString(r)&&s.push("domain="+r),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Om(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Dm(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function fa(e,t,n){let o=!Om(t);return e&&(o||n==!1)?Dm(e,t):t}const oi=e=>e instanceof fe?{...e}:e;function qe(e,t){t=t||{};const n={};function o(c,u,f,d){return R.isPlainObject(c)&&R.isPlainObject(u)?R.merge.call({caseless:d},c,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function r(c,u,f,d){if(R.isUndefined(u)){if(!R.isUndefined(c))return o(void 0,c,f,d)}else return o(c,u,f,d)}function i(c,u){if(!R.isUndefined(u))return o(void 0,u)}function s(c,u){if(R.isUndefined(u)){if(!R.isUndefined(c))return o(void 0,c)}else return o(void 0,u)}function a(c,u,f){if(f in t)return o(c,u);if(f in e)return o(void 0,c)}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(c,u,f)=>r(oi(c),oi(u),f,!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=l[u]||r,d=f(e[u],t[u],u);R.isUndefined(d)&&f!==a||(n[u]=d)}),n}const ha=e=>{const t=qe({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:r,xsrfCookieName:i,headers:s,auth:a}=t;t.headers=s=fe.from(s),t.url=aa(fa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(R.isFormData(n)){if(ce.hasStandardBrowserEnv||ce.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ce.hasStandardBrowserEnv&&(o&&R.isFunction(o)&&(o=o(t)),o||o!==!1&&Pm(t.url))){const c=r&&i&&Im.read(i);c&&s.set(r,c)}return t},$m=typeof XMLHttpRequest<"u",Lm=$m&&function(e){return new Promise(function(n,o){const r=ha(e);let i=r.data;const s=fe.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,f,d,h,g;function m(){h&&h(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function x(){if(!y)return;const p=fe.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:p,config:e,request:y};da(function(T){n(T),m()},function(T){o(T),m()},E),y=null}"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(x)},y.onabort=function(){y&&(o(new J("Request aborted",J.ECONNABORTED,e,y)),y=null)},y.onerror=function(){o(new J("Network Error",J.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let w=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||ca;r.timeoutErrorMessage&&(w=r.timeoutErrorMessage),o(new J(w,E.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,y)),y=null},i===void 0&&s.setContentType(null),"setRequestHeader"in y&&R.forEach(s.toJSON(),function(w,E){y.setRequestHeader(E,w)}),R.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),c&&([d,g]=gn(c,!0),y.addEventListener("progress",d)),l&&y.upload&&([f,h]=gn(l),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",h)),(r.cancelToken||r.signal)&&(u=p=>{y&&(o(!p||p.type?new at(null,e,y):p),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const S=km(r.url);if(S&&ce.protocols.indexOf(S)===-1){o(new J("Unsupported protocol "+S+":",J.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Hm=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,r;const i=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;o.abort(u instanceof J?u:new at(u instanceof Error?u.message:u))}};let s=t&&setTimeout(()=>{s=null,i(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:l}=o;return l.unsubscribe=()=>R.asap(a),l}},zm=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,r;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Bm=async function*(e,t){for await(const n of jm(e))yield*zm(n,t)},jm=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},ri=(e,t,n,o)=>{const r=Bm(e,t);let i=0,s,a=l=>{s||(s=!0,o&&o(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let d=i+=f;n(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Dn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pa=Dn&&typeof ReadableStream=="function",Fm=Dn&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ga=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vm=pa&&ga(()=>{let e=!1;const t=new Request(ce.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ii=64*1024,yo=pa&&ga(()=>R.isReadableStream(new Response("").body)),mn={stream:yo&&(e=>e.body)};Dn&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!mn[t]&&(mn[t]=R.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new J(`Response type '${t}' is not supported`,J.ERR_NOT_SUPPORT,o)})})})(new Response);const Um=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(ce.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await Fm(e)).byteLength},qm=async(e,t)=>{const n=R.toFiniteNumber(e.getContentLength());return n??Um(t)},Xm=Dn&&(async e=>{let{url:t,method:n,data:o,signal:r,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:d}=ha(e);c=c?(c+"").toLowerCase():"text";let h=Hm([r,i&&i.toAbortSignal()],s),g;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let y;try{if(l&&Vm&&n!=="get"&&n!=="head"&&(y=await qm(u,o))!==0){let E=new Request(t,{method:"POST",body:o,duplex:"half"}),A;if(R.isFormData(o)&&(A=E.headers.get("content-type"))&&u.setContentType(A),E.body){const[T,k]=ti(y,gn(ni(l)));o=ri(E.body,ii,T,k)}}R.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...d,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:o,duplex:"half",credentials:x?f:void 0});let S=await fetch(g,d);const p=yo&&(c==="stream"||c==="response");if(yo&&(a||p&&m)){const E={};["status","statusText","headers"].forEach(I=>{E[I]=S[I]});const A=R.toFiniteNumber(S.headers.get("content-length")),[T,k]=a&&ti(A,gn(ni(a),!0))||[];S=new Response(ri(S.body,ii,T,()=>{k&&k(),m&&m()}),E)}c=c||"text";let w=await mn[R.findKey(mn,c)||"text"](S,e);return!p&&m&&m(),await new Promise((E,A)=>{da(E,A,{data:w,headers:fe.from(S.headers),status:S.status,statusText:S.statusText,config:e,request:g})})}catch(x){throw m&&m(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,e,g),{cause:x.cause||x}):J.from(x,x&&x.code,e,g)}}),xo={http:am,xhr:Lm,fetch:Xm};R.forEach(xo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const si=e=>`- ${e}`,Ym=e=>R.isFunction(e)||e===null||e===!1,ma={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let i=0;i<t;i++){n=e[i];let s;if(o=n,!Ym(n)&&(o=xo[(s=String(n)).toLowerCase()],o===void 0))throw new J(`Unknown adapter '${s}'`);if(o)break;r[s||"#"+i]=o}if(!o){const i=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?i.length>1?`since :
`+i.map(si).join(`
`):" "+si(i[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:xo};function Kn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new at(null,e)}function ai(e){return Kn(e),e.headers=fe.from(e.headers),e.data=Gn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ma.getAdapter(e.adapter||Ot.adapter)(e).then(function(o){return Kn(e),o.data=Gn.call(e,e.transformResponse,o),o.headers=fe.from(o.headers),o},function(o){return ua(o)||(Kn(e),o&&o.response&&(o.response.data=Gn.call(e,e.transformResponse,o.response),o.response.headers=fe.from(o.response.headers))),Promise.reject(o)})}const ya="1.10.0",$n={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{$n[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const ci={};$n.transitional=function(t,n,o){function r(i,s){return"[Axios v"+ya+"] Transitional option '"+i+"'"+s+(o?". "+o:"")}return(i,s,a)=>{if(t===!1)throw new J(r(s," has been removed"+(n?" in "+n:"")),J.ERR_DEPRECATED);return n&&!ci[s]&&(ci[s]=!0,console.warn(r(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,s,a):!0}};$n.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function Wm(e,t,n){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],s=t[i];if(s){const a=e[i],l=a===void 0||s(a,i,e);if(l!==!0)throw new J("option "+i+" must be "+l,J.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}}const tn={assertOptions:Wm,validators:$n},be=tn.validators;let je=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Qr,response:new Qr}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=qe(this.defaults,n);const{transitional:o,paramsSerializer:r,headers:i}=n;o!==void 0&&tn.assertOptions(o,{silentJSONParsing:be.transitional(be.boolean),forcedJSONParsing:be.transitional(be.boolean),clarifyTimeoutError:be.transitional(be.boolean)},!1),r!=null&&(R.isFunction(r)?n.paramsSerializer={serialize:r}:tn.assertOptions(r,{encode:be.function,serialize:be.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),tn.assertOptions(n,{baseUrl:be.spelling("baseURL"),withXsrfToken:be.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=i&&R.merge(i.common,i[n.method]);i&&R.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=fe.concat(s,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,d;if(!l){const g=[ai.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,u=Promise.resolve(n);f<d;)u=u.then(g[f++],g[f++]);return u}d=a.length;let h=n;for(f=0;f<d;){const g=a[f++],m=a[f++];try{h=g(h)}catch(y){m.call(this,y);break}}try{u=ai.call(this,h)}catch(g){return Promise.reject(g)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=qe(this.defaults,t);const n=fa(t.baseURL,t.url,t.allowAbsoluteUrls);return aa(n,t.params,t.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(t){je.prototype[t]=function(n,o){return this.request(qe(o||{},{method:t,url:n,data:(o||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(o){return function(i,s,a){return this.request(qe(a||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}je.prototype[t]=n(),je.prototype[t+"Form"]=n(!0)});let Zm=class xa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(r=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](r);o._listeners=null}),this.promise.then=r=>{let i;const s=new Promise(a=>{o.subscribe(a),i=a}).then(r);return s.cancel=function(){o.unsubscribe(i)},s},t(function(i,s,a){o.reason||(o.reason=new at(i,s,a),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new xa(function(r){t=r}),cancel:t}}};function Gm(e){return function(n){return e.apply(null,n)}}function Km(e){return R.isObject(e)&&e.isAxiosError===!0}const wo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wo).forEach(([e,t])=>{wo[t]=e});function wa(e){const t=new je(e),n=Zs(je.prototype.request,t);return R.extend(n,je.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return wa(qe(e,r))},n}const se=wa(Ot);se.Axios=je;se.CanceledError=at;se.CancelToken=Zm;se.isCancel=ua;se.VERSION=ya;se.toFormData=On;se.AxiosError=J;se.Cancel=se.CanceledError;se.all=function(t){return Promise.all(t)};se.spread=Gm;se.isAxiosError=Km;se.mergeConfig=qe;se.AxiosHeaders=fe;se.formToJSON=e=>la(R.isHTMLForm(e)?new FormData(e):e);se.getAdapter=ma.getAdapter;se.HttpStatusCode=wo;se.default=se;const{Axios:l0,AxiosError:u0,CanceledError:d0,isCancel:f0,CancelToken:h0,VERSION:p0,all:g0,Cancel:m0,isAxiosError:y0,spread:x0,toFormData:w0,AxiosHeaders:b0,HttpStatusCode:v0,formToJSON:E0,getAdapter:S0,mergeConfig:_0}=se,Jm="http://localhost:3000/api",Jn=se.create({baseURL:Jm,headers:{"Content-Type":"application/json"}}),li={listThreads:async()=>(await Jn.get("/threads")).data.threads,getThread:async e=>(await Jn.get(`/threads/${e}`)).data,createThread:async e=>(await Jn.post("/threads",{goal:e})).data},Qm={pending:"#9CA3AF",running:"#F59E0B",waiting:"#3B82F6",completed:"#10B981",failed:"#EF4444"},e0=({data:e})=>{const{thread:t,onClick:n}=e,o=Qm[t.status];return v.jsxs("div",{style:{background:"white",border:`2px solid ${o}`,borderRadius:"8px",padding:"10px",minWidth:"200px",cursor:"pointer"},onClick:()=>n(t),children:[v.jsx(De,{type:"target",position:U.Top}),v.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Thread"}),v.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[t.goal.substring(0,50),"..."]}),v.jsx("div",{style:{fontSize:"10px",color:o,marginTop:"4px"},children:t.status.toUpperCase()}),t.tasks.length>0&&v.jsxs("div",{style:{fontSize:"10px",marginTop:"4px"},children:["Tasks: ",t.tasks.filter(r=>r.status==="completed").length,"/",t.tasks.length]}),v.jsx(De,{type:"source",position:U.Bottom})]})},t0={llm_call:"",tool_call:"",thread_result:""},n0=({data:e})=>{const{stitch:t,onClick:n}=e,o=t0[t.stitch_type];return v.jsxs("div",{style:{background:"#f0f0f0",border:"1px solid #ccc",borderRadius:"6px",padding:"8px",minWidth:"150px",cursor:"pointer",fontSize:"12px"},onClick:()=>n(t),children:[v.jsx(De,{type:"target",position:U.Top}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("span",{children:o}),v.jsx("span",{children:t.stitch_type.replace("_"," ")})]}),t.tool_name&&v.jsx("div",{style:{fontSize:"10px",color:"#666",marginTop:"2px"},children:t.tool_name}),t.thread_result_summary&&v.jsxs("div",{style:{fontSize:"10px",color:"#666",marginTop:"2px"},children:[t.thread_result_summary.substring(0,50),"..."]}),v.jsx(De,{type:"source",position:U.Bottom})]})},o0=({thread:e,stitch:t,onClose:n})=>!e&&!t?null:v.jsxs("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"400px",background:"white",borderLeft:"1px solid #ccc",padding:"20px",overflowY:"auto",zIndex:10},children:[v.jsx("button",{onClick:n,style:{position:"absolute",right:"10px",top:"10px",background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""}),e&&v.jsxs("div",{children:[v.jsx("h2",{style:{marginTop:0},children:"Thread Details"}),v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"ID:"})," ",e.id]}),v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Goal:"})," ",e.goal]}),v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Status:"})," ",e.status]}),e.tasks.length>0&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Tasks:"}),v.jsx("ul",{style:{marginTop:"5px"},children:e.tasks.map((o,r)=>v.jsxs("li",{style:{marginBottom:"5px"},children:[v.jsxs("span",{style:{color:o.status==="completed"?"green":o.status==="in_progress"?"orange":"gray"},children:["[",o.status,"]"]})," ",o.description]},r))})]}),e.result&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Result:"}),v.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(e.result,null,2)})]})]}),t&&v.jsxs("div",{children:[v.jsx("h2",{style:{marginTop:0},children:"Stitch Details"}),v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"ID:"})," ",t.id]}),v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Type:"})," ",t.stitch_type]}),t.tool_name&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Tool:"})," ",t.tool_name]}),t.llm_request&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"LLM Request:"}),v.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(t.llm_request,null,2)})]}),t.llm_response&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"LLM Response:"}),v.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(t.llm_response,null,2)})]}),t.tool_input&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Tool Input:"}),v.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(t.tool_input,null,2)})]}),t.tool_output&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("strong",{children:"Tool Output:"}),v.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(t.tool_output,null,2)})]})]})]}),r0={thread:e0,stitch:n0},i0=()=>{const[e,t,n]=Yp([]),[o,r,i]=Wp([]),[s,a]=P.useState(),[l,c]=P.useState(),[u,f]=P.useState(!0),d=P.useCallback(async()=>{try{const g=await li.listThreads(),m=[],y=[];g.forEach((x,S)=>{m.push({id:`thread-${x.id}`,type:"thread",position:{x:S*300,y:0},data:{thread:x,onClick:async p=>{a(p),c(void 0);const w=await li.getThread(p.id);a(w)}}}),x.parent_thread_id&&y.push({id:`edge-${x.parent_thread_id}-${x.id}`,source:`thread-${x.parent_thread_id}`,target:`thread-${x.id}`})}),t(m),r(y),f(!1)}catch(g){console.error("Failed to fetch threads:",g),f(!1)}},[t,r]);P.useEffect(()=>{d();const g=setInterval(d,2e3);return()=>clearInterval(g)},[d]);const h=P.useCallback(()=>{a(void 0),c(void 0)},[]);return u?v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:"Loading threads..."}):v.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[v.jsxs(Xp,{nodes:e,edges:o,onNodesChange:n,onEdgesChange:i,onPaneClick:h,nodeTypes:r0,fitView:!0,children:[v.jsx(sg,{}),v.jsx(Qp,{variant:ke.Dots,gap:12,size:1})]}),v.jsx(o0,{thread:s,stitch:l,onClose:()=>{a(void 0),c(void 0)}}),v.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",background:"white",padding:"10px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[v.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Agentic Threads Visualization"}),v.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[v.jsx("div",{children:" Click a thread to see details"}),v.jsx("div",{children:" Auto-refreshes every 2 seconds"})]})]})]})},N0=function(){return v.jsx(i0,{})};export{N0 as component};
